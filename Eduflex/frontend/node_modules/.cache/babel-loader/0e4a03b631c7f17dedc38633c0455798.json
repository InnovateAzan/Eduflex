{"ast":null,"code":"import axios from \"./axios\";\nimport { setClasses, setCourses, setDormitories, setCampuses, setSections, setfeesType, setAcademicYear, setStaff, setDivisions, setDepartments, setYeargroup, setScholarships } from \"./slices/schoolSlice\";\nimport store from \"./index\";\nimport { LoginString } from \"./localStorage\";\nimport { loggin, logout } from \"./slices/userSlice\";\nexport const callData = () => {\n  axios.get(\"/classes\").then(res => {\n    store.dispatch(setClasses(res === null || res === void 0 ? void 0 : res.data));\n  });\n  axios.get(\"/sections\").then(res => {\n    store.dispatch(setSections(res === null || res === void 0 ? void 0 : res.data));\n  });\n  axios.get(\"/courses\").then(res => {\n    store.dispatch(setCourses(res === null || res === void 0 ? void 0 : res.data));\n  });\n  axios.get(\"/scholarships\").then(res => {\n    store.dispatch(setScholarships(res === null || res === void 0 ? void 0 : res.data));\n  });\n  axios.get(\"/campuses\").then(res => {\n    store.dispatch(setCampuses(res === null || res === void 0 ? void 0 : res.data));\n  });\n  axios.get(\"/dormitories\").then(res => {\n    store.dispatch(setDormitories(res === null || res === void 0 ? void 0 : res.data));\n  });\n  axios.get(\"/departments\").then(res => {\n    store.dispatch(setDepartments(res === null || res === void 0 ? void 0 : res.data));\n  });\n  axios.get(\"/divisions\").then(res => {\n    store.dispatch(setDivisions(res === null || res === void 0 ? void 0 : res.data));\n  });\n  axios.get(\"/fees/types\").then(res => {\n    store.dispatch(setfeesType(res === null || res === void 0 ? void 0 : res.data));\n  });\n  axios.get(\"/yeargroup\").then(res => {\n    store.dispatch(setYeargroup(res === null || res === void 0 ? void 0 : res.data));\n  });\n  axios.get(\"/academicyear/admin\").then(res => {\n    store.dispatch(setAcademicYear(res === null || res === void 0 ? void 0 : res.data));\n  });\n  axios.get(\"/teachers\").then(res => {\n    store.dispatch(setStaff(res === null || res === void 0 ? void 0 : res.data));\n  });\n};\nexport const handleAutoLogin = () => {\n  store.dispatch(loggin({\n    userID: localStorage.getItem((LoginString === null || LoginString === void 0 ? void 0 : LoginString.ID) || \"\"),\n    id: localStorage.getItem((LoginString === null || LoginString === void 0 ? void 0 : LoginString.ID) || \"\"),\n    photoUrl: localStorage.getItem((LoginString === null || LoginString === void 0 ? void 0 : LoginString.PhotoURL) || \"\"),\n    email: localStorage.getItem((LoginString === null || LoginString === void 0 ? void 0 : LoginString.EMAIL) || \"\"),\n    name: localStorage.getItem((LoginString === null || LoginString === void 0 ? void 0 : LoginString.NAME) || \"\"),\n    role: localStorage.getItem((LoginString === null || LoginString === void 0 ? void 0 : LoginString.USERROLE) || \"\"),\n    lastName: localStorage.getItem((LoginString === null || LoginString === void 0 ? void 0 : LoginString.LASTNAME) || \"\"),\n    middleName: localStorage.getItem((LoginString === null || LoginString === void 0 ? void 0 : LoginString.middleName) || \"\")\n  }));\n  callData();\n};\nexport const doUploadImage = async dataUrl => {\n  axios.post(\"/upload\", {\n    dataUrl\n  });\n};\nexport const handleLogin = user => {\n  store.dispatch(loggin({\n    userID: user === null || user === void 0 ? void 0 : user.userID,\n    id: user === null || user === void 0 ? void 0 : user.userID,\n    name: user === null || user === void 0 ? void 0 : user.name,\n    email: user === null || user === void 0 ? void 0 : user.email,\n    photoUrl: user === null || user === void 0 ? void 0 : user.profileUrl,\n    role: user === null || user === void 0 ? void 0 : user.role,\n    lastName: user === null || user === void 0 ? void 0 : user.surname,\n    middleName: user === null || user === void 0 ? void 0 : user.middleName\n  }));\n  localStorage.setItem(LoginString.ID, user === null || user === void 0 ? void 0 : user.userID);\n  localStorage.setItem(LoginString.PhotoURL, user === null || user === void 0 ? void 0 : user.profileUrl);\n  localStorage.setItem(LoginString.NAME, user === null || user === void 0 ? void 0 : user.name);\n  localStorage.setItem(LoginString.EMAIL, user === null || user === void 0 ? void 0 : user.email);\n  localStorage.setItem(LoginString.USERROLE, user === null || user === void 0 ? void 0 : user.role);\n  localStorage.setItem(LoginString.LASTNAME, user === null || user === void 0 ? void 0 : user.surname);\n  localStorage.setItem(LoginString.MIDNAME, user === null || user === void 0 ? void 0 : user.middleName);\n  callData();\n};\nexport const initFunc = () => {\n  if (localStorage.getItem(LoginString.ID)) {\n    // store.dispatch(setLoading(true));\n    handleAutoLogin();\n    // store.dispatch(setLoading(false));\n  } else {\n    store.dispatch(logout());\n  }\n};","map":{"version":3,"names":["axios","setClasses","setCourses","setDormitories","setCampuses","setSections","setfeesType","setAcademicYear","setStaff","setDivisions","setDepartments","setYeargroup","setScholarships","store","LoginString","loggin","logout","callData","get","then","res","dispatch","data","handleAutoLogin","userID","localStorage","getItem","ID","id","photoUrl","PhotoURL","email","EMAIL","name","NAME","role","USERROLE","lastName","LASTNAME","middleName","doUploadImage","dataUrl","post","handleLogin","user","profileUrl","surname","setItem","MIDNAME","initFunc"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/store/apiCall.js"],"sourcesContent":["import axios from \"./axios\";\nimport {\n  setClasses,\n  setCourses,\n  setDormitories,\n  setCampuses,\n  setSections,\n  setfeesType,\n  setAcademicYear,\n  setStaff,\n  setDivisions,\n  setDepartments,\n  setYeargroup,\n  setScholarships,\n} from \"./slices/schoolSlice\";\nimport store from \"./index\";\nimport { LoginString } from \"./localStorage\";\nimport { loggin, logout } from \"./slices/userSlice\";\n\nexport const callData = () => {\n  axios.get(\"/classes\").then((res) => {\n    store.dispatch(setClasses(res?.data));\n  });\n  axios.get(\"/sections\").then((res) => {\n    store.dispatch(setSections(res?.data));\n  });\n  axios.get(\"/courses\").then((res) => {\n    store.dispatch(setCourses(res?.data));\n  });\n  axios.get(\"/scholarships\").then((res) => {\n    store.dispatch(setScholarships(res?.data));\n  });\n  axios.get(\"/campuses\").then((res) => {\n    store.dispatch(setCampuses(res?.data));\n  });\n  axios.get(\"/dormitories\").then((res) => {\n    store.dispatch(setDormitories(res?.data));\n  });\n  axios.get(\"/departments\").then((res) => {\n    store.dispatch(setDepartments(res?.data));\n  });\n  axios.get(\"/divisions\").then((res) => {\n    store.dispatch(setDivisions(res?.data));\n  });\n  axios.get(\"/fees/types\").then((res) => {\n    store.dispatch(setfeesType(res?.data));\n  });\n  axios.get(\"/yeargroup\").then((res) => {\n    store.dispatch(setYeargroup(res?.data));\n  });\n  axios.get(\"/academicyear/admin\").then((res) => {\n    store.dispatch(setAcademicYear(res?.data));\n  });\n  axios.get(\"/teachers\").then((res) => {\n    store.dispatch(setStaff(res?.data));\n  });\n};\n\nexport const handleAutoLogin = () => {\n  store.dispatch(\n    loggin({\n      userID: localStorage.getItem(LoginString?.ID || \"\"),\n      id: localStorage.getItem(LoginString?.ID || \"\"),\n      photoUrl: localStorage.getItem(LoginString?.PhotoURL || \"\"),\n      email: localStorage.getItem(LoginString?.EMAIL || \"\"),\n      name: localStorage.getItem(LoginString?.NAME || \"\"),\n      role: localStorage.getItem(LoginString?.USERROLE || \"\"),\n      lastName: localStorage.getItem(LoginString?.LASTNAME || \"\"),\n      middleName: localStorage.getItem(LoginString?.middleName || \"\"),\n    })\n  );\n  callData();\n};\n\nexport const doUploadImage = async (dataUrl) => {\n  axios.post(\"/upload\", { dataUrl });\n};\n\nexport const handleLogin = (user) => {\n  store.dispatch(\n    loggin({\n      userID: user?.userID,\n      id: user?.userID,\n      name: user?.name,\n      email: user?.email,\n      photoUrl: user?.profileUrl,\n      role: user?.role,\n      lastName: user?.surname,\n      middleName: user?.middleName,\n    })\n  );\n  localStorage.setItem(LoginString.ID, user?.userID);\n  localStorage.setItem(LoginString.PhotoURL, user?.profileUrl);\n  localStorage.setItem(LoginString.NAME, user?.name);\n  localStorage.setItem(LoginString.EMAIL, user?.email);\n  localStorage.setItem(LoginString.USERROLE, user?.role);\n  localStorage.setItem(LoginString.LASTNAME, user?.surname);\n  localStorage.setItem(LoginString.MIDNAME, user?.middleName);\n  callData();\n};\n\nexport const initFunc = () => {\n  if (localStorage.getItem(LoginString.ID)) {\n    // store.dispatch(setLoading(true));\n    handleAutoLogin();\n    // store.dispatch(setLoading(false));\n  } else {\n    store.dispatch(logout());\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}