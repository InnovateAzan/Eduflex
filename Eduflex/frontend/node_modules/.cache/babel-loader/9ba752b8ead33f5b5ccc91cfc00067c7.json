{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\components\\\\class\\\\RecordAttendance.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport Table from \"../../AdminComponents/shared/RegisterAttendance\";\nimport axios from \"../../store/axios\";\nimport { errorAlert, successAlert } from \"../../utils\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../store/slices/userSlice\";\nimport moment from \"moment\";\nimport { useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RegisterAttendance() {\n  _s();\n  const [loading, setloading] = useState(false);\n  const [students, setstudents] = useState([]);\n  const user = useSelector(selectUser);\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    axios.get(`/students/class/${id}`).then(res => {\n      var _res$data$users;\n      if (res.data.error) {\n        errorAlert(res.data.error);\n      }\n      let data = (_res$data$users = res.data.users) === null || _res$data$users === void 0 ? void 0 : _res$data$users.map(student => {\n        return {\n          userID: student.userID,\n          name: student.name,\n          surname: student.surname,\n          status: false\n        };\n      });\n      setstudents(data);\n      console.log(data);\n    });\n  }, [id]);\n  const handleRegisterAttendance = () => {\n    setloading(true);\n    axios.post(\"/attendance/register\", {\n      users: students,\n      classID: id,\n      role: \"students\",\n      user: user === null || user === void 0 ? void 0 : user.id\n    }).then(res => {\n      setloading(false);\n      if (res.data.error) {\n        errorAlert(res.data.error);\n        return 0;\n      }\n      successAlert(\"Today's Attendance is successfully recorded\");\n      console.log(res.data);\n    }).catch(err => {\n      console.log(err);\n      setloading(false);\n      errorAlert(\"Sorry something when wrong\");\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content__container mb-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Register Today's Attendance for \", id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        children: moment().format(\"Do MMMM  YYYY\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      attendanceData: students,\n      handleRegister: handleRegisterAttendance,\n      loading: loading,\n      setattendanceData: setstudents\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n_s(RegisterAttendance, \"+WCd0LwIkA/pADJSdv1Blekj5Hw=\", false, function () {\n  return [useSelector, useParams];\n});\n_c = RegisterAttendance;\nexport default RegisterAttendance;\nvar _c;\n$RefreshReg$(_c, \"RegisterAttendance\");","map":{"version":3,"names":["React","useState","useEffect","Table","axios","errorAlert","successAlert","useSelector","selectUser","moment","useParams","jsxDEV","_jsxDEV","RegisterAttendance","_s","loading","setloading","students","setstudents","user","id","get","then","res","_res$data$users","data","error","users","map","student","userID","name","surname","status","console","log","handleRegisterAttendance","post","classID","role","catch","err","children","className","fileName","_jsxFileName","lineNumber","columnNumber","format","attendanceData","handleRegister","setattendanceData","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/components/class/RecordAttendance.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Table from \"../../AdminComponents/shared/RegisterAttendance\";\nimport axios from \"../../store/axios\";\nimport { errorAlert, successAlert } from \"../../utils\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../store/slices/userSlice\";\nimport moment from \"moment\";\nimport { useParams } from \"react-router-dom\";\n\nfunction RegisterAttendance() {\n  const [loading, setloading] = useState(false);\n  const [students, setstudents] = useState([]);\n  const user = useSelector(selectUser);\n  const { id } = useParams();\n\n  useEffect(() => {\n    axios.get(`/students/class/${id}`).then((res) => {\n      if (res.data.error) {\n        errorAlert(res.data.error);\n      }\n      let data = res.data.users?.map((student) => {\n        return {\n          userID: student.userID,\n          name: student.name,\n          surname: student.surname,\n          status: false,\n        };\n      });\n      setstudents(data);\n      console.log(data);\n    });\n  }, [id]);\n\n  const handleRegisterAttendance = () => {\n    setloading(true);\n    axios\n      .post(\"/attendance/register\", {\n        users: students,\n        classID: id,\n        role: \"students\",\n        user: user?.id,\n      })\n      .then((res) => {\n        setloading(false);\n        if (res.data.error) {\n          errorAlert(res.data.error);\n          return 0;\n        }\n        successAlert(\"Today's Attendance is successfully recorded\");\n        console.log(res.data);\n      })\n      .catch((err) => {\n        console.log(err);\n        setloading(false);\n        errorAlert(\"Sorry something when wrong\");\n      });\n  };\n\n  return (\n    <div>\n      <div className=\"content__container mb-5\">\n        <h3>Register Today's Attendance for {id}</h3>\n        <h6>{moment().format(\"Do MMMM  YYYY\")}</h6>\n      </div>\n\n      <Table\n        attendanceData={students}\n        handleRegister={handleRegisterAttendance}\n        loading={loading}\n        setattendanceData={setstudents}\n      />\n    </div>\n  );\n}\n\nexport default RegisterAttendance;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}