{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\AdminComponents\\\\academics\\\\notes\\\\EditNote.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport EditForm from \"./NoteForm\";\nimport axios from \"../../../store/axios\";\nimport { useParams } from \"react-router-dom\";\nimport { errorAlert, successAlert } from \"../../../utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EditNote() {\n  _s();\n  const [classID, setclassID] = useState(\"\");\n  const [subject, setsubject] = useState(\"\");\n  const [topic, settopic] = useState(\"\");\n  const [notes, setnotes] = useState(\"\");\n  const [file, setfile] = useState(\"\");\n  const [loading, setloading] = useState(false);\n  const {\n    id\n  } = useParams();\n  const handleResetNote = () => {\n    setclassID(\"\");\n    setsubject(\"\");\n    settopic(\"\");\n    setnotes(\"\");\n    setfile(\"\");\n  };\n  useEffect(() => {\n    axios.get(`/notes/${id}`).then(res => {\n      let data = res.data.doc;\n      setclassID(data === null || data === void 0 ? void 0 : data.classID);\n      setsubject(data === null || data === void 0 ? void 0 : data.courseID);\n      settopic(data === null || data === void 0 ? void 0 : data.topic);\n      setfile(data === null || data === void 0 ? void 0 : data.file);\n      setnotes(data === null || data === void 0 ? void 0 : data.notes);\n    });\n  }, [id]);\n  const handleEditNote = () => {\n    setloading(true);\n    const fileData = new FormData();\n    fileData.append(\"photo\", file);\n    axios.post(\"/upload\", {\n      dataUrl: file\n    }).then(res => {\n      const path = res.data.url;\n      console.log(path);\n      axios.put(`/notes/update/${id}`, {\n        topic,\n        classID,\n        courseID: subject,\n        notes,\n        file: path\n      }).then(response => {\n        console.log(response.data);\n        if (response.data.error) {\n          errorAlert(res.data.error);\n          setloading(false);\n          return 0;\n        }\n        successAlert(\"notes successfully added\");\n        setloading(false);\n        handleResetNote();\n      });\n    }).catch(err => {\n      setloading(false);\n      errorAlert(\"sorry something went error, try again later\");\n    });\n  };\n  const handleSetFile = async e => {\n    const selected = e.target.files[0]; //await imageCompression(e.target.files[0], options);\n    if ((selected === null || selected === void 0 ? void 0 : selected.size) > 2000000) {\n      return errorAlert(\"image is too large\");\n    }\n    //setfile(selected);\n    const fileReader = new FileReader();\n    fileReader.readAsDataURL(selected);\n    fileReader.onloadend = () => {\n      setfile(fileReader.result);\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"content__container mb-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Add New Notes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EditForm, {\n      classID: classID,\n      setclass: setclassID,\n      subject: subject,\n      setsubject: setsubject,\n      topic: topic,\n      settopic: settopic,\n      file: file,\n      handleAdd: handleEditNote,\n      handleReset: handleResetNote,\n      loading: loading,\n      isEdit: true,\n      setfile: handleSetFile,\n      notes: notes,\n      setnotes: setnotes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_s(EditNote, \"uir4LUaWe49P4sID4QiwvJ2IJ2A=\", false, function () {\n  return [useParams];\n});\n_c = EditNote;\nexport default EditNote;\nvar _c;\n$RefreshReg$(_c, \"EditNote\");","map":{"version":3,"names":["React","useState","useEffect","EditForm","axios","useParams","errorAlert","successAlert","jsxDEV","_jsxDEV","EditNote","_s","classID","setclassID","subject","setsubject","topic","settopic","notes","setnotes","file","setfile","loading","setloading","id","handleResetNote","get","then","res","data","doc","courseID","handleEditNote","fileData","FormData","append","post","dataUrl","path","url","console","log","put","response","error","catch","err","handleSetFile","e","selected","target","files","size","fileReader","FileReader","readAsDataURL","onloadend","result","className","children","fileName","_jsxFileName","lineNumber","columnNumber","setclass","handleAdd","handleReset","isEdit","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/AdminComponents/academics/notes/EditNote.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport EditForm from \"./NoteForm\";\nimport axios from \"../../../store/axios\";\nimport { useParams } from \"react-router-dom\";\nimport { errorAlert, successAlert } from \"../../../utils\";\n\nfunction EditNote() {\n  const [classID, setclassID] = useState(\"\");\n  const [subject, setsubject] = useState(\"\");\n  const [topic, settopic] = useState(\"\");\n  const [notes, setnotes] = useState(\"\");\n  const [file, setfile] = useState(\"\");\n  const [loading, setloading] = useState(false);\n  const { id } = useParams();\n\n  const handleResetNote = () => {\n    setclassID(\"\");\n    setsubject(\"\");\n    settopic(\"\");\n    setnotes(\"\");\n    setfile(\"\");\n  };\n  useEffect(() => {\n    axios.get(`/notes/${id}`).then((res) => {\n      let data = res.data.doc;\n      setclassID(data?.classID);\n      setsubject(data?.courseID);\n      settopic(data?.topic);\n      setfile(data?.file);\n      setnotes(data?.notes);\n    });\n  }, [id]);\n\n  const handleEditNote = () => {\n    setloading(true);\n    const fileData = new FormData();\n    fileData.append(\"photo\", file);\n    axios\n      .post(\"/upload\", { dataUrl: file })\n      .then((res) => {\n        const path = res.data.url;\n        console.log(path);\n        axios\n          .put(`/notes/update/${id}`, {\n            topic,\n            classID,\n            courseID: subject,\n            notes,\n            file: path,\n          })\n          .then((response) => {\n            console.log(response.data);\n            if (response.data.error) {\n              errorAlert(res.data.error);\n              setloading(false);\n              return 0;\n            }\n            successAlert(\"notes successfully added\");\n            setloading(false);\n            handleResetNote();\n          });\n      })\n      .catch((err) => {\n        setloading(false);\n        errorAlert(\"sorry something went error, try again later\");\n      });\n  };\n\n  const handleSetFile = async (e) => {\n    const selected = e.target.files[0]; //await imageCompression(e.target.files[0], options);\n    if (selected?.size > 2000000) {\n      return errorAlert(\"image is too large\");\n    }\n    //setfile(selected);\n    const fileReader = new FileReader();\n    fileReader.readAsDataURL(selected);\n    fileReader.onloadend = () => {\n      setfile(fileReader.result);\n    };\n  };\n\n  return (\n    <div className=\"content__container mb-5\">\n      <h3>Add New Notes</h3>\n      <EditForm\n        classID={classID}\n        setclass={setclassID}\n        subject={subject}\n        setsubject={setsubject}\n        topic={topic}\n        settopic={settopic}\n        file={file}\n        handleAdd={handleEditNote}\n        handleReset={handleResetNote}\n        loading={loading}\n        isEdit={true}\n        setfile={handleSetFile}\n        notes={notes}\n        setnotes={setnotes}\n      />\n    </div>\n  );\n}\n\nexport default EditNote;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}