{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\AdminComponents\\\\academics\\\\classes\\\\PastClasses.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport ClassTable from \"../../shared/ListTable\";\nimport Search from \"../../shared/Search\";\nimport axios from \"../../../store/axios\";\n//import { useHistory } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { selectCampuses, selectStaff } from \"../../../store/slices/schoolSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst tableHeadings = [{\n  id: \"classCode\",\n  name: \"ID\"\n}, {\n  id: \"name\",\n  name: \"Class\"\n}, {\n  id: \"campusID\",\n  name: \"Campus\"\n}, {\n  id: \"group\",\n  name: \"Group\"\n}, {\n  id: \"division\",\n  name: \"Division\"\n}, {\n  id: \"prefect\",\n  name: \"Prefect\"\n}, {\n  id: \"teacherID\",\n  name: \"Class Teacher\"\n}, {\n  id: \"sba\",\n  name: \"S.B.A Config\"\n}, {\n  id: \"sbaStaff\",\n  name: \"SBA Staff\"\n}];\nfunction Classes() {\n  _s();\n  const [name, setname] = useState(\"\");\n  const [campus, setcampus] = useState(\"\");\n  const [teacher, setteacher] = useState(\"\");\n  const [classes, setclasses] = useState([]);\n  const [storeData, setstoreData] = useState([]);\n  const staff = useSelector(selectStaff);\n  const [loading, setloading] = useState(false);\n  const campuses = useSelector(selectCampuses);\n  useEffect(() => {\n    setloading(true);\n    axios.get(\"/classes/past\").then(res => {\n      setloading(false);\n      let data = res.data;\n      let classesData = data.map(e => {\n        var _staff$find, _staff$find2, _campuses$find;\n        return {\n          ...e,\n          num: 0,\n          sba: e.sba ? \"set\" : \"not set\",\n          teacherID: (((_staff$find = staff.find(i => i.userID === e.teacherID)) === null || _staff$find === void 0 ? void 0 : _staff$find.name) || \"-\") + \" \" + (((_staff$find2 = staff.find(i => i.userID === e.teacherID)) === null || _staff$find2 === void 0 ? void 0 : _staff$find2.surname) || \"\"),\n          campusID: (_campuses$find = campuses.find(i => i._id === e.campusID)) === null || _campuses$find === void 0 ? void 0 : _campuses$find.name\n        };\n      });\n      setclasses(classesData);\n      setstoreData(classesData);\n    });\n  }, [staff, campuses]);\n  const inputFields = [{\n    type: \"text\",\n    label: \"Search Name\",\n    value: name,\n    name: \"name\",\n    onChange: setname\n  }, {\n    type: \"text\",\n    label: \"Search Campus\",\n    value: campus,\n    name: \"campus\",\n    onChange: setcampus\n  }, {\n    type: \"text\",\n    label: \"Search Teacher\",\n    value: teacher,\n    name: \"teacher\",\n    onChange: setteacher\n  }];\n  const handleReset = e => {\n    e.preventDefault();\n    setname(\"\");\n    setcampus(\"\");\n    setteacher(\"\");\n    setclasses(storeData);\n  };\n  const handleSearch = e => {\n    e.preventDefault();\n    let newClasses = [];\n    if (name) {\n      newClasses = storeData.filter(i => (i === null || i === void 0 ? void 0 : i.name.toLowerCase().includes(name === null || name === void 0 ? void 0 : name.toLowerCase())) || (i === null || i === void 0 ? void 0 : i.classCode.toLowerCase().includes(name === null || name === void 0 ? void 0 : name.toLowerCase())));\n    }\n    if (campus) {\n      newClasses = newClasses.filter(i => i === null || i === void 0 ? void 0 : i.campusID.toLowerCase().includes(campus === null || campus === void 0 ? void 0 : campus.toLowerCase()));\n    }\n    if (teacher) {\n      newClasses = newClasses.filter(i => i === null || i === void 0 ? void 0 : i.teacherID.toLowerCase().includes(teacher === null || teacher === void 0 ? void 0 : teacher.toLowerCase()));\n    }\n    setclasses(newClasses);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Past Classes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Search, {\n      title: \"Search classes \",\n      inputFields: inputFields,\n      handleSearch: handleSearch,\n      handleReset: handleReset\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-between mb-2\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Past Classes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ClassTable, {\n        loading: loading,\n        data: classes,\n        tableHeader: tableHeadings,\n        noActions: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n}\n_s(Classes, \"Sft9ruYdn6DSRhdnLOi8v9+huYE=\", false, function () {\n  return [useSelector, useSelector];\n});\n_c = Classes;\nexport default Classes;\nvar _c;\n$RefreshReg$(_c, \"Classes\");","map":{"version":3,"names":["React","useState","useEffect","ClassTable","Search","axios","useSelector","selectCampuses","selectStaff","jsxDEV","_jsxDEV","tableHeadings","id","name","Classes","_s","setname","campus","setcampus","teacher","setteacher","classes","setclasses","storeData","setstoreData","staff","loading","setloading","campuses","get","then","res","data","classesData","map","e","_staff$find","_staff$find2","_campuses$find","num","sba","teacherID","find","i","userID","surname","campusID","_id","inputFields","type","label","value","onChange","handleReset","preventDefault","handleSearch","newClasses","filter","toLowerCase","includes","classCode","children","fileName","_jsxFileName","lineNumber","columnNumber","title","className","tableHeader","noActions","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/AdminComponents/academics/classes/PastClasses.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ClassTable from \"../../shared/ListTable\";\nimport Search from \"../../shared/Search\";\nimport axios from \"../../../store/axios\";\n//import { useHistory } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { selectCampuses, selectStaff } from \"../../../store/slices/schoolSlice\";\n\nconst tableHeadings = [\n  { id: \"classCode\", name: \"ID\" },\n  { id: \"name\", name: \"Class\" },\n  { id: \"campusID\", name: \"Campus\" },\n  { id: \"group\", name: \"Group\" },\n  { id: \"division\", name: \"Division\" },\n  { id: \"prefect\", name: \"Prefect\" },\n  { id: \"teacherID\", name: \"Class Teacher\" },\n  { id: \"sba\", name: \"S.B.A Config\" },\n  { id: \"sbaStaff\", name: \"SBA Staff\" },\n];\n\nfunction Classes() {\n  const [name, setname] = useState(\"\");\n  const [campus, setcampus] = useState(\"\");\n  const [teacher, setteacher] = useState(\"\");\n  const [classes, setclasses] = useState([]);\n  const [storeData, setstoreData] = useState([]);\n  const staff = useSelector(selectStaff);\n  const [loading, setloading] = useState(false);\n  const campuses = useSelector(selectCampuses);\n\n  useEffect(() => {\n    setloading(true);\n    axios.get(\"/classes/past\").then((res) => {\n      setloading(false);\n      let data = res.data;\n      let classesData = data.map((e) => {\n        return {\n          ...e,\n          num: 0,\n          sba: e.sba ? \"set\" : \"not set\",\n          teacherID:\n            (staff.find((i) => i.userID === e.teacherID)?.name || \"-\") +\n            \" \" +\n            (staff.find((i) => i.userID === e.teacherID)?.surname || \"\"),\n          campusID: campuses.find((i) => i._id === e.campusID)?.name,\n        };\n      });\n      setclasses(classesData);\n      setstoreData(classesData);\n    });\n  }, [staff, campuses]);\n\n  const inputFields = [\n    {\n      type: \"text\",\n      label: \"Search Name\",\n      value: name,\n      name: \"name\",\n      onChange: setname,\n    },\n    {\n      type: \"text\",\n      label: \"Search Campus\",\n      value: campus,\n      name: \"campus\",\n      onChange: setcampus,\n    },\n    {\n      type: \"text\",\n      label: \"Search Teacher\",\n      value: teacher,\n      name: \"teacher\",\n      onChange: setteacher,\n    },\n  ];\n\n  const handleReset = (e) => {\n    e.preventDefault();\n    setname(\"\");\n    setcampus(\"\");\n    setteacher(\"\");\n    setclasses(storeData);\n  };\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    let newClasses = [];\n    if (name) {\n      newClasses = storeData.filter(\n        (i) =>\n          i?.name.toLowerCase().includes(name?.toLowerCase()) ||\n          i?.classCode.toLowerCase().includes(name?.toLowerCase())\n      );\n    }\n    if (campus) {\n      newClasses = newClasses.filter((i) =>\n        i?.campusID.toLowerCase().includes(campus?.toLowerCase())\n      );\n    }\n    if (teacher) {\n      newClasses = newClasses.filter((i) =>\n        i?.teacherID.toLowerCase().includes(teacher?.toLowerCase())\n      );\n    }\n    setclasses(newClasses);\n  };\n\n  return (\n    <div>\n      <h3>Past Classes</h3>\n      <Search\n        title=\"Search classes \"\n        inputFields={inputFields}\n        handleSearch={handleSearch}\n        handleReset={handleReset}\n      />\n      <div className=\"content__container\">\n        <div className=\"d-flex justify-content-between mb-2\">\n          <h3>Past Classes</h3>\n        </div>\n        <ClassTable\n          loading={loading}\n          data={classes}\n          tableHeader={tableHeadings}\n          noActions={true}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Classes;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,UAAU,MAAM,wBAAwB;AAC/C,OAAOC,MAAM,MAAM,qBAAqB;AACxC,OAAOC,KAAK,MAAM,sBAAsB;AACxC;AACA,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,cAAc,EAAEC,WAAW,QAAQ,mCAAmC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhF,MAAMC,aAAa,GAAG,CACpB;EAAEC,EAAE,EAAE,WAAW;EAAEC,IAAI,EAAE;AAAK,CAAC,EAC/B;EAAED,EAAE,EAAE,MAAM;EAAEC,IAAI,EAAE;AAAQ,CAAC,EAC7B;EAAED,EAAE,EAAE,UAAU;EAAEC,IAAI,EAAE;AAAS,CAAC,EAClC;EAAED,EAAE,EAAE,OAAO;EAAEC,IAAI,EAAE;AAAQ,CAAC,EAC9B;EAAED,EAAE,EAAE,UAAU;EAAEC,IAAI,EAAE;AAAW,CAAC,EACpC;EAAED,EAAE,EAAE,SAAS;EAAEC,IAAI,EAAE;AAAU,CAAC,EAClC;EAAED,EAAE,EAAE,WAAW;EAAEC,IAAI,EAAE;AAAgB,CAAC,EAC1C;EAAED,EAAE,EAAE,KAAK;EAAEC,IAAI,EAAE;AAAe,CAAC,EACnC;EAAED,EAAE,EAAE,UAAU;EAAEC,IAAI,EAAE;AAAY,CAAC,CACtC;AAED,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACjB,MAAM,CAACF,IAAI,EAAEG,OAAO,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACgB,MAAM,EAAEC,SAAS,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACkB,OAAO,EAAEC,UAAU,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACoB,OAAO,EAAEC,UAAU,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACsB,SAAS,EAAEC,YAAY,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAMwB,KAAK,GAAGnB,WAAW,CAACE,WAAW,CAAC;EACtC,MAAM,CAACkB,OAAO,EAAEC,UAAU,CAAC,GAAG1B,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM2B,QAAQ,GAAGtB,WAAW,CAACC,cAAc,CAAC;EAE5CL,SAAS,CAAC,MAAM;IACdyB,UAAU,CAAC,IAAI,CAAC;IAChBtB,KAAK,CAACwB,GAAG,CAAC,eAAe,CAAC,CAACC,IAAI,CAAEC,GAAG,IAAK;MACvCJ,UAAU,CAAC,KAAK,CAAC;MACjB,IAAIK,IAAI,GAAGD,GAAG,CAACC,IAAI;MACnB,IAAIC,WAAW,GAAGD,IAAI,CAACE,GAAG,CAAEC,CAAC,IAAK;QAAA,IAAAC,WAAA,EAAAC,YAAA,EAAAC,cAAA;QAChC,OAAO;UACL,GAAGH,CAAC;UACJI,GAAG,EAAE,CAAC;UACNC,GAAG,EAAEL,CAAC,CAACK,GAAG,GAAG,KAAK,GAAG,SAAS;UAC9BC,SAAS,EACP,CAAC,EAAAL,WAAA,GAAAX,KAAK,CAACiB,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,MAAM,KAAKT,CAAC,CAACM,SAAS,CAAC,cAAAL,WAAA,uBAA3CA,WAAA,CAA6CvB,IAAI,KAAI,GAAG,IACzD,GAAG,IACF,EAAAwB,YAAA,GAAAZ,KAAK,CAACiB,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,MAAM,KAAKT,CAAC,CAACM,SAAS,CAAC,cAAAJ,YAAA,uBAA3CA,YAAA,CAA6CQ,OAAO,KAAI,EAAE,CAAC;UAC9DC,QAAQ,GAAAR,cAAA,GAAEV,QAAQ,CAACc,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACI,GAAG,KAAKZ,CAAC,CAACW,QAAQ,CAAC,cAAAR,cAAA,uBAA1CA,cAAA,CAA4CzB;QACxD,CAAC;MACH,CAAC,CAAC;MACFS,UAAU,CAACW,WAAW,CAAC;MACvBT,YAAY,CAACS,WAAW,CAAC;IAC3B,CAAC,CAAC;EACJ,CAAC,EAAE,CAACR,KAAK,EAAEG,QAAQ,CAAC,CAAC;EAErB,MAAMoB,WAAW,GAAG,CAClB;IACEC,IAAI,EAAE,MAAM;IACZC,KAAK,EAAE,aAAa;IACpBC,KAAK,EAAEtC,IAAI;IACXA,IAAI,EAAE,MAAM;IACZuC,QAAQ,EAAEpC;EACZ,CAAC,EACD;IACEiC,IAAI,EAAE,MAAM;IACZC,KAAK,EAAE,eAAe;IACtBC,KAAK,EAAElC,MAAM;IACbJ,IAAI,EAAE,QAAQ;IACduC,QAAQ,EAAElC;EACZ,CAAC,EACD;IACE+B,IAAI,EAAE,MAAM;IACZC,KAAK,EAAE,gBAAgB;IACvBC,KAAK,EAAEhC,OAAO;IACdN,IAAI,EAAE,SAAS;IACfuC,QAAQ,EAAEhC;EACZ,CAAC,CACF;EAED,MAAMiC,WAAW,GAAIlB,CAAC,IAAK;IACzBA,CAAC,CAACmB,cAAc,CAAC,CAAC;IAClBtC,OAAO,CAAC,EAAE,CAAC;IACXE,SAAS,CAAC,EAAE,CAAC;IACbE,UAAU,CAAC,EAAE,CAAC;IACdE,UAAU,CAACC,SAAS,CAAC;EACvB,CAAC;EAED,MAAMgC,YAAY,GAAIpB,CAAC,IAAK;IAC1BA,CAAC,CAACmB,cAAc,CAAC,CAAC;IAClB,IAAIE,UAAU,GAAG,EAAE;IACnB,IAAI3C,IAAI,EAAE;MACR2C,UAAU,GAAGjC,SAAS,CAACkC,MAAM,CAC1Bd,CAAC,IACA,CAAAA,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAE9B,IAAI,CAAC6C,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC9C,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE6C,WAAW,CAAC,CAAC,CAAC,MACnDf,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEiB,SAAS,CAACF,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC9C,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE6C,WAAW,CAAC,CAAC,CAAC,CAC5D,CAAC;IACH;IACA,IAAIzC,MAAM,EAAE;MACVuC,UAAU,GAAGA,UAAU,CAACC,MAAM,CAAEd,CAAC,IAC/BA,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEG,QAAQ,CAACY,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC1C,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEyC,WAAW,CAAC,CAAC,CAC1D,CAAC;IACH;IACA,IAAIvC,OAAO,EAAE;MACXqC,UAAU,GAAGA,UAAU,CAACC,MAAM,CAAEd,CAAC,IAC/BA,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEF,SAAS,CAACiB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACxC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEuC,WAAW,CAAC,CAAC,CAC5D,CAAC;IACH;IACApC,UAAU,CAACkC,UAAU,CAAC;EACxB,CAAC;EAED,oBACE9C,OAAA;IAAAmD,QAAA,gBACEnD,OAAA;MAAAmD,QAAA,EAAI;IAAY;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACrBvD,OAAA,CAACN,MAAM;MACL8D,KAAK,EAAC,iBAAiB;MACvBlB,WAAW,EAAEA,WAAY;MACzBO,YAAY,EAAEA,YAAa;MAC3BF,WAAW,EAAEA;IAAY;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC1B,CAAC,eACFvD,OAAA;MAAKyD,SAAS,EAAC,oBAAoB;MAAAN,QAAA,gBACjCnD,OAAA;QAAKyD,SAAS,EAAC,qCAAqC;QAAAN,QAAA,eAClDnD,OAAA;UAAAmD,QAAA,EAAI;QAAY;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClB,CAAC,eACNvD,OAAA,CAACP,UAAU;QACTuB,OAAO,EAAEA,OAAQ;QACjBM,IAAI,EAAEX,OAAQ;QACd+C,WAAW,EAAEzD,aAAc;QAC3B0D,SAAS,EAAE;MAAK;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAClD,EAAA,CA7GQD,OAAO;EAAA,QAMAR,WAAW,EAERA,WAAW;AAAA;AAAAgE,EAAA,GARrBxD,OAAO;AA+GhB,eAAeA,OAAO;AAAC,IAAAwD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}