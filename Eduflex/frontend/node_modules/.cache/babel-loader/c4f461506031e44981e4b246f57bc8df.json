{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\AdminComponents\\\\messages\\\\StaffMessage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport SendToForm from \"../../components/messages/SendToForm\";\nimport axios from \"../../store/axios\";\nimport { errorAlert, successAlert } from \"../../utils\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../store/slices/userSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction StaffMessage() {\n  _s();\n  const [message, setmessage] = useState(\"\");\n  const [recipientsOptions, setrecipientsOptions] = useState([]);\n  const [recipient, setrecipient] = useState(\"\");\n  const sender = useSelector(selectUser);\n  const [loading, setloading] = useState(false);\n  const [error, seterror] = useState(\"\");\n  useEffect(() => {\n    axios.get(\"/teachers\").then(res => {\n      setrecipientsOptions(res.data.map(user => {\n        return {\n          id: user.userID,\n          name: user.name,\n          telephone: (user === null || user === void 0 ? void 0 : user.telephone) || (user === null || user === void 0 ? void 0 : user.mobilenumber),\n          surname: user.surname\n        };\n      }));\n    });\n  }, []);\n  const onSend = e => {\n    e.preventDefault();\n    seterror(\"\");\n    if (!recipient) {\n      seterror(\"Please select recipient\");\n    }\n    if (message && recipient) {\n      setloading(true);\n      let selectedStudent = recipientsOptions.find(i => i.id === recipient);\n      axios.post(`/chats`, {\n        message,\n        telephone: selectedStudent === null || selectedStudent === void 0 ? void 0 : selectedStudent.telephone,\n        userID: recipient,\n        sender: sender === null || sender === void 0 ? void 0 : sender.id\n      }).then(res => {\n        setloading(false);\n        if (res.data.error) {\n          errorAlert(res.data.error);\n          return 0;\n        }\n        successAlert(\"message send\");\n        setmessage(\"\");\n      }).catch(err => {\n        console.log(err);\n        setloading(false);\n      });\n    }\n  };\n  const searchOptions = () => {\n    return recipientsOptions.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n      value: option.id,\n      children: [option.name, \" \", option.surname, \" \", option.id, \" \"]\n    }, option.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(SendToForm, {\n      message: message,\n      setmessage: setmessage,\n      onSend: onSend,\n      loading: loading,\n      recipientsOptions: recipientsOptions,\n      recipient: recipient,\n      setrecipient: setrecipient,\n      sender: sender === null || sender === void 0 ? void 0 : sender.id,\n      searchOptions: searchOptions,\n      sendto: \"Staff\",\n      error: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(StaffMessage, \"Gz7rIx4kggVomf6aKirs0iwJWpA=\", false, function () {\n  return [useSelector];\n});\n_c = StaffMessage;\nexport default StaffMessage;\nvar _c;\n$RefreshReg$(_c, \"StaffMessage\");","map":{"version":3,"names":["React","useState","useEffect","SendToForm","axios","errorAlert","successAlert","useSelector","selectUser","jsxDEV","_jsxDEV","StaffMessage","_s","message","setmessage","recipientsOptions","setrecipientsOptions","recipient","setrecipient","sender","loading","setloading","error","seterror","get","then","res","data","map","user","id","userID","name","telephone","mobilenumber","surname","onSend","e","preventDefault","selectedStudent","find","i","post","catch","err","console","log","searchOptions","option","value","children","fileName","_jsxFileName","lineNumber","columnNumber","sendto","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/AdminComponents/messages/StaffMessage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport SendToForm from \"../../components/messages/SendToForm\";\nimport axios from \"../../store/axios\";\nimport { errorAlert, successAlert } from \"../../utils\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../store/slices/userSlice\";\n\nfunction StaffMessage() {\n  const [message, setmessage] = useState(\"\");\n  const [recipientsOptions, setrecipientsOptions] = useState([]);\n  const [recipient, setrecipient] = useState(\"\");\n  const sender = useSelector(selectUser);\n  const [loading, setloading] = useState(false);\n  const [error, seterror] = useState(\"\");\n\n  useEffect(() => {\n    axios.get(\"/teachers\").then((res) => {\n      setrecipientsOptions(\n        res.data.map((user) => {\n          return {\n            id: user.userID,\n            name: user.name,\n            telephone: user?.telephone || user?.mobilenumber,\n            surname: user.surname,\n          };\n        })\n      );\n    });\n  }, []);\n\n  const onSend = (e) => {\n    e.preventDefault();\n    seterror(\"\");\n    if (!recipient) {\n      seterror(\"Please select recipient\");\n    }\n\n    if (message && recipient) {\n      setloading(true);\n      let selectedStudent = recipientsOptions.find((i) => i.id === recipient);\n      axios\n        .post(`/chats`, {\n          message,\n          telephone: selectedStudent?.telephone,\n          userID: recipient,\n          sender: sender?.id,\n        })\n        .then((res) => {\n          setloading(false);\n          if (res.data.error) {\n            errorAlert(res.data.error);\n            return 0;\n          }\n          successAlert(\"message send\");\n          setmessage(\"\");\n        })\n        .catch((err) => {\n          console.log(err);\n          setloading(false);\n        });\n    }\n  };\n\n  const searchOptions = () => {\n    return recipientsOptions.map((option) => (\n      <option key={option.id} value={option.id}>\n        {option.name} {option.surname} {option.id}{\" \"}\n      </option>\n    ));\n  };\n\n  return (\n    <div>\n      <SendToForm\n        message={message}\n        setmessage={setmessage}\n        onSend={onSend}\n        loading={loading}\n        recipientsOptions={recipientsOptions}\n        recipient={recipient}\n        setrecipient={setrecipient}\n        sender={sender?.id}\n        searchOptions={searchOptions}\n        sendto=\"Staff\"\n        error={error}\n      />\n    </div>\n  );\n}\n\nexport default StaffMessage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}