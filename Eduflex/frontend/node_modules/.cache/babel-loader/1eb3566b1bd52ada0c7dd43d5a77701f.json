{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\StudentComponents\\\\finances\\\\FeesPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport TableList from \"../../AdminComponents/shared/ListTable\";\nimport axios from \"../../store/axios\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../store/slices/userSlice\";\nimport FeesTable from \"./Fees\";\nimport { currentCurrency } from \"../../utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst tableHeader = [{\n  id: \"date\",\n  name: \"Date\"\n}, {\n  id: \"paymentMethod\",\n  name: \"Payment Method\"\n}, {\n  id: \"bank\",\n  name: \"Bank\"\n}, {\n  id: \"description\",\n  name: \"Description\"\n}, {\n  id: \"amount\",\n  name: `Amount ${currentCurrency()}`\n}];\nfunction FeesPage() {\n  _s();\n  const [loading, setloading] = useState(false);\n  const [payments, setpayments] = useState([]);\n  const [fees, setfees] = useState({});\n  const user = useSelector(selectUser);\n  const [totalBill, settotalBill] = useState(0);\n  const [totalPaid, settotalPaid] = useState(0);\n  const [balance, setbalance] = useState(0);\n  useEffect(() => {\n    const getData = async () => {\n      var _student$data$student, _student$data$student2, _transactions$data;\n      setloading(true);\n      let transactions = await axios.get(`/transactions/student/${user === null || user === void 0 ? void 0 : user.userID}`);\n      setpayments(transactions.data);\n      let student = await axios.get(`/students/student/${user === null || user === void 0 ? void 0 : user.userID}`);\n      console.log(student);\n      const feesData = await axios.get(`/fees/type/${(_student$data$student = student.data.student) === null || _student$data$student === void 0 ? void 0 : _student$data$student.classID}/${(_student$data$student2 = student.data.student) === null || _student$data$student2 === void 0 ? void 0 : _student$data$student2.status}`);\n      setfees(feesData.data);\n      console.log(feesData.data);\n      const bill = Object.values(feesData.data).reduce((t, value) => Number(t) + Number(value), 0);\n      const paid = (_transactions$data = transactions.data) === null || _transactions$data === void 0 ? void 0 : _transactions$data.reduce((accumulator, element) => {\n        return Number(accumulator) + Number(element === null || element === void 0 ? void 0 : element.amount);\n      }, 0);\n      settotalBill(bill);\n      settotalPaid(paid);\n      setbalance(bill - paid);\n      setloading(false);\n    };\n    getData();\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(FeesTable, {\n      fees: fees,\n      totalBill: totalBill,\n      totalPaid: totalPaid,\n      balance: balance\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"mb-3 mt-5\",\n      children: \"Fees Transactions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableList, {\n      data: payments,\n      noActions: true,\n      tableHeader: tableHeader,\n      loading: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(FeesPage, \"BDKlYNhiXfQiPNBT8RzoWkx+UWs=\", false, function () {\n  return [useSelector];\n});\n_c = FeesPage;\nexport default FeesPage;\nvar _c;\n$RefreshReg$(_c, \"FeesPage\");","map":{"version":3,"names":["React","useState","useEffect","TableList","axios","useSelector","selectUser","FeesTable","currentCurrency","jsxDEV","_jsxDEV","tableHeader","id","name","FeesPage","_s","loading","setloading","payments","setpayments","fees","setfees","user","totalBill","settotalBill","totalPaid","settotalPaid","balance","setbalance","getData","_student$data$student","_student$data$student2","_transactions$data","transactions","get","userID","data","student","console","log","feesData","classID","status","bill","Object","values","reduce","t","value","Number","paid","accumulator","element","amount","children","fileName","_jsxFileName","lineNumber","columnNumber","className","noActions","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/StudentComponents/finances/FeesPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport TableList from \"../../AdminComponents/shared/ListTable\";\nimport axios from \"../../store/axios\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../store/slices/userSlice\";\nimport FeesTable from \"./Fees\";\nimport { currentCurrency } from \"../../utils\";\n\nconst tableHeader = [\n  { id: \"date\", name: \"Date\" },\n  { id: \"paymentMethod\", name: \"Payment Method\" },\n  { id: \"bank\", name: \"Bank\" },\n  { id: \"description\", name: \"Description\" },\n  { id: \"amount\", name: `Amount ${currentCurrency()}` },\n];\nfunction FeesPage() {\n  const [loading, setloading] = useState(false);\n  const [payments, setpayments] = useState([]);\n  const [fees, setfees] = useState({});\n  const user = useSelector(selectUser);\n  const [totalBill, settotalBill] = useState(0);\n  const [totalPaid, settotalPaid] = useState(0);\n  const [balance, setbalance] = useState(0);\n\n  useEffect(() => {\n    const getData = async () => {\n      setloading(true);\n      let transactions = await axios.get(\n        `/transactions/student/${user?.userID}`\n      );\n      setpayments(transactions.data);\n\n      let student = await axios.get(`/students/student/${user?.userID}`);\n\n      console.log(student);\n\n      const feesData = await axios.get(\n        `/fees/type/${student.data.student?.classID}/${student.data.student?.status}`\n      );\n      setfees(feesData.data);\n      console.log(feesData.data);\n      const bill = Object.values(feesData.data).reduce(\n        (t, value) => Number(t) + Number(value),\n        0\n      );\n\n      const paid = transactions.data?.reduce((accumulator, element) => {\n        return Number(accumulator) + Number(element?.amount);\n      }, 0);\n      settotalBill(bill);\n      settotalPaid(paid);\n      setbalance(bill - paid);\n      setloading(false);\n    };\n    getData();\n  }, [user]);\n\n  return (\n    <div>\n      <FeesTable\n        fees={fees}\n        totalBill={totalBill}\n        totalPaid={totalPaid}\n        balance={balance}\n      />\n\n      <h3 className=\"mb-3 mt-5\">Fees Transactions</h3>\n      <TableList\n        data={payments}\n        noActions={true}\n        tableHeader={tableHeader}\n        loading={loading}\n      />\n    </div>\n  );\n}\n\nexport default FeesPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}