{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\AdminComponents\\\\academics\\\\yearGroups\\\\YearGroups.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport YearGoupTable from \"../../shared/ListTable\";\nimport axios from \"../../../store/axios\";\nimport { errorAlert, successAlert } from \"../../../utils\";\nimport AddYearGroup from \"./AddYearGroup\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport { useDispatch } from \"react-redux\";\nimport { setfeesType, setYeargroup } from \"../../../store/slices/schoolSlice\";\nimport Loading from \"../../../Loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst tableHeadings = [{\n  id: \"createdAt\",\n  name: \"Created At\"\n}, {\n  id: \"name\",\n  name: \"Year Group\"\n}, {\n  id: \"year\",\n  name: \"Year\"\n}];\nfunction Yeargroup() {\n  _s();\n  const [loading, setloading] = useState(false);\n  const [classgroup, setclassgroup] = useState([]);\n  const [name, setname] = useState(\"\");\n  const [storedata, setstoredata] = useState([]);\n  const [addLoading, setaddLoading] = useState(false);\n  const [year, setyear] = useState(\"\");\n  const [searchQuery, setsearchQuery] = useState(\"\");\n  const dispatch = useDispatch();\n  useEffect(() => {\n    setloading(true);\n    axios.get(\"/yeargroup\").then(res => {\n      setclassgroup(res.data);\n      console.log(res.data);\n      setstoredata(res.data);\n      setloading(false);\n    });\n  }, []);\n  const handleDelete = id => {\n    const ans = window.confirm(\"are you sure you want to delete\");\n    if (ans) {\n      axios.delete(`/yeargroup/delete/${id}`).then(res => {\n        console.log(res.data);\n        if (res.data.error) {\n          errorAlert(res.data.error);\n          return 0;\n        }\n        setclassgroup(classgroup.filter(e => e._id !== id));\n        dispatch(setYeargroup(classgroup.filter(e => e._id !== id)));\n      });\n    }\n  };\n  const handleAdd = () => {\n    setaddLoading(true);\n    axios.post(\"/yeargroup/create\", {\n      name,\n      year\n    }).then(res => {\n      var _res$data$doc;\n      setaddLoading(false);\n      setclassgroup([res.data.doc, ...classgroup]);\n      successAlert(\"Successfully created\");\n      dispatch(setYeargroup([...classgroup, {\n        name,\n        code: (_res$data$doc = res.data.doc) === null || _res$data$doc === void 0 ? void 0 : _res$data$doc.code\n      }]));\n      setname(\"\");\n    }).catch(err => {\n      console.log(err);\n      errorAlert(\"Failed to add\");\n      setaddLoading(false);\n    });\n  };\n  const handleSearch = e => {\n    e.preventDefault();\n    let newClasses = [];\n    if (searchQuery) {\n      newClasses = storedata.filter(i => i === null || i === void 0 ? void 0 : i.name.toLowerCase().includes(searchQuery === null || searchQuery === void 0 ? void 0 : searchQuery.toLowerCase()));\n    }\n    setclassgroup(newClasses);\n  };\n  const handleReset = e => {\n    e.preventDefault();\n    setclassgroup(storedata);\n    setsearchQuery(\"\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [loading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm-6\",\n      children: /*#__PURE__*/_jsxDEV(AddYearGroup, {\n        name: name,\n        setname: setname,\n        year: year,\n        setyear: setyear,\n        loading: addLoading,\n        onSubmit: handleAdd\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content__container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Class Groups\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleReset,\n            className: \"d-flex\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Search...\",\n              value: searchQuery,\n              onChange: e => setsearchQuery(e.target.value),\n              type: \"text\",\n              className: \"form-control\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this), searchQuery && /*#__PURE__*/_jsxDEV(CancelIcon, {\n              onClick: handleReset\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 31\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(YearGoupTable, {\n        handleDelete: handleDelete,\n        data: classgroup,\n        isEdit: true,\n        handleSearch: handleSearch,\n        tableHeader: tableHeadings\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n_s(Yeargroup, \"SmBfPxNdVDUqhYPOzyZpvTPDeZM=\", false, function () {\n  return [useDispatch];\n});\n_c = Yeargroup;\nexport default Yeargroup;\nvar _c;\n$RefreshReg$(_c, \"Yeargroup\");","map":{"version":3,"names":["React","useState","useEffect","YearGoupTable","axios","errorAlert","successAlert","AddYearGroup","CancelIcon","useDispatch","setfeesType","setYeargroup","Loading","jsxDEV","_jsxDEV","tableHeadings","id","name","Yeargroup","_s","loading","setloading","classgroup","setclassgroup","setname","storedata","setstoredata","addLoading","setaddLoading","year","setyear","searchQuery","setsearchQuery","dispatch","get","then","res","data","console","log","handleDelete","ans","window","confirm","delete","error","filter","e","_id","handleAdd","post","_res$data$doc","doc","code","catch","err","handleSearch","preventDefault","newClasses","i","toLowerCase","includes","handleReset","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","value","onChange","target","type","onClick","isEdit","tableHeader","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/AdminComponents/academics/yearGroups/YearGroups.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport YearGoupTable from \"../../shared/ListTable\";\nimport axios from \"../../../store/axios\";\nimport { errorAlert, successAlert } from \"../../../utils\";\nimport AddYearGroup from \"./AddYearGroup\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport { useDispatch } from \"react-redux\";\nimport { setfeesType, setYeargroup } from \"../../../store/slices/schoolSlice\";\nimport Loading from \"../../../Loading\";\n\nconst tableHeadings = [\n  { id: \"createdAt\", name: \"Created At\" },\n  { id: \"name\", name: \"Year Group\" },\n  { id: \"year\", name: \"Year\" },\n];\n\nfunction Yeargroup() {\n  const [loading, setloading] = useState(false);\n  const [classgroup, setclassgroup] = useState([]);\n  const [name, setname] = useState(\"\");\n  const [storedata, setstoredata] = useState([]);\n  const [addLoading, setaddLoading] = useState(false);\n  const [year, setyear] = useState(\"\");\n  const [searchQuery, setsearchQuery] = useState(\"\");\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    setloading(true);\n    axios.get(\"/yeargroup\").then((res) => {\n      setclassgroup(res.data);\n      console.log(res.data);\n      setstoredata(res.data);\n      setloading(false);\n    });\n  }, []);\n\n  const handleDelete = (id) => {\n    const ans = window.confirm(\"are you sure you want to delete\");\n    if (ans) {\n      axios.delete(`/yeargroup/delete/${id}`).then((res) => {\n        console.log(res.data);\n        if (res.data.error) {\n          errorAlert(res.data.error);\n          return 0;\n        }\n        setclassgroup(classgroup.filter((e) => e._id !== id));\n        dispatch(setYeargroup(classgroup.filter((e) => e._id !== id)));\n      });\n    }\n  };\n\n  const handleAdd = () => {\n    setaddLoading(true);\n    axios\n      .post(\"/yeargroup/create\", { name, year })\n      .then((res) => {\n        setaddLoading(false);\n        setclassgroup([res.data.doc, ...classgroup]);\n        successAlert(\"Successfully created\");\n        dispatch(\n          setYeargroup([...classgroup, { name, code: res.data.doc?.code }])\n        );\n        setname(\"\");\n      })\n      .catch((err) => {\n        console.log(err);\n        errorAlert(\"Failed to add\");\n        setaddLoading(false);\n      });\n  };\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    let newClasses = [];\n    if (searchQuery) {\n      newClasses = storedata.filter((i) =>\n        i?.name.toLowerCase().includes(searchQuery?.toLowerCase())\n      );\n    }\n    setclassgroup(newClasses);\n  };\n\n  const handleReset = (e) => {\n    e.preventDefault();\n    setclassgroup(storedata);\n    setsearchQuery(\"\");\n  };\n\n  return (\n    <div className=\"row\">\n      {loading && <Loading />}\n      <div className=\"col-sm-6\">\n        <AddYearGroup\n          name={name}\n          setname={setname}\n          year={year}\n          setyear={setyear}\n          loading={addLoading}\n          onSubmit={handleAdd}\n        />\n      </div>\n      <div className=\"col-sm-6\">\n        <div className=\"content__container\">\n          <div className=\"d-flex justify-content-between\">\n            <h3>Class Groups</h3>\n            <form onSubmit={handleReset} className=\"d-flex\">\n              <input\n                placeholder=\"Search...\"\n                value={searchQuery}\n                onChange={(e) => setsearchQuery(e.target.value)}\n                type=\"text\"\n                className=\"form-control\"\n              />\n              {searchQuery && <CancelIcon onClick={handleReset} />}\n            </form>\n          </div>\n        </div>\n        <YearGoupTable\n          handleDelete={handleDelete}\n          data={classgroup}\n          isEdit={true}\n          handleSearch={handleSearch}\n          tableHeader={tableHeadings}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Yeargroup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}