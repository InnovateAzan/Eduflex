{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\AdminComponents\\\\finance\\\\setfees\\\\SetFees.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport FeesTable from \"./FeesTable\";\nimport axios from \"../../../store/axios\";\nimport AddType from \"./AddFessModel\";\nimport DeleteModel from \"./DeleteFeesModal\";\nimport { errorAlert } from \"../../../utils\";\nimport EditFees from \"./EditFees\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectFees, setfeesType } from \"../../../store/slices/schoolSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst tableHeader = [{\n  id: \"code\",\n  name: \"Fees Type\"\n}, {\n  id: \"day\",\n  name: \" Day\"\n}, {\n  id: \"freshDay\",\n  name: \"Fresh Day\"\n}, {\n  id: \"border\",\n  name: \"Border\"\n}, {\n  id: \"freshBorder\",\n  name: \"Fresh Border\"\n}];\nfunction SetFees() {\n  _s();\n  const [fees, setfees] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [openEdit, setopenEdit] = useState(false);\n  const [name, setname] = useState(\"\");\n  const [deleteID, setdeleteID] = useState(\"\");\n  const [openDelete, setopenDelete] = useState(false);\n  const [loading, setloading] = useState(false);\n  const [deleteloading, setdeleteloading] = useState(false);\n  const [editFee, seteditFee] = useState({});\n  const dispatch = useDispatch();\n  const feesType = useSelector(selectFees);\n  useEffect(() => {\n    axios.get(\"/fees\").then(res => {\n      console.log(res.data);\n      setfees(res.data);\n    });\n  }, []);\n  const handleAddNew = () => {\n    setloading(true);\n    axios.post(\"/fees/create\", {\n      name\n    }).then(async res => {\n      var _res$data$docs;\n      setloading(false);\n      setfees([res.data.docs, ...fees]);\n      dispatch(setfeesType([...feesType, {\n        name,\n        code: (_res$data$docs = res.data.docs) === null || _res$data$docs === void 0 ? void 0 : _res$data$docs.code\n      }]));\n      setOpen(false);\n      setname(\"\");\n      await axios.post(\"/activitylog/create\", {\n        activity: ` ${name} fees type was created`,\n        user: \"admin\"\n      });\n    });\n  };\n  const handleDelete = id => {\n    setopenDelete(true);\n    setdeleteID(id);\n  };\n  const handleEdit = fee => {\n    console.log(fee, \"clicked\");\n    seteditFee(fee);\n    setopenEdit(true);\n  };\n  const onDelete = () => {\n    setdeleteloading(true);\n    axios.delete(`/fees/delete/${deleteID}`).then(async res => {\n      setdeleteloading(false);\n      if (res.data.error) {\n        errorAlert(res.data.error);\n        return 0;\n      }\n      setopenDelete(false);\n      setfees(fees.filter(e => e._id !== deleteID));\n      dispatch(setfeesType(feesType.filter(i => i._id !== deleteID)));\n      let deleted = fees.find(e => e._id === deleteID);\n      await axios.post(\"/activitylog/create\", {\n        activity: ` ${deleted === null || deleted === void 0 ? void 0 : deleted.name} fees  was deleted`,\n        user: \"admin\"\n      });\n    }).catch(err => {\n      console.log(err);\n      errorAlert(\"error occurred\");\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Current School Fees \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" row mb-3\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-end\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          className: \"btn blue__btn ml-3\",\n          to: \"/finance/fees/set\",\n          children: [\" \", \"Set Fees\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FeesTable, {\n      handleDelete: handleDelete,\n      handleEdit: handleEdit,\n      tableHeader: tableHeader,\n      data: fees\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddType, {\n      open: open,\n      name: name,\n      onSubmit: handleAddNew,\n      loading: loading,\n      setname: setname,\n      setOpen: setOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DeleteModel, {\n      handleDelete: onDelete,\n      loading: deleteloading,\n      open: openDelete,\n      setOpen: setopenDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EditFees, {\n      setfees: setfees,\n      fees: fees,\n      open: openEdit,\n      fee: editFee,\n      setOpen: setopenEdit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n_s(SetFees, \"lea40qJY3UEyFl8e/wory6VNhF4=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = SetFees;\nexport default SetFees;\nvar _c;\n$RefreshReg$(_c, \"SetFees\");","map":{"version":3,"names":["React","useState","useEffect","Link","FeesTable","axios","AddType","DeleteModel","errorAlert","EditFees","useDispatch","useSelector","selectFees","setfeesType","jsxDEV","_jsxDEV","tableHeader","id","name","SetFees","_s","fees","setfees","open","setOpen","openEdit","setopenEdit","setname","deleteID","setdeleteID","openDelete","setopenDelete","loading","setloading","deleteloading","setdeleteloading","editFee","seteditFee","dispatch","feesType","get","then","res","console","log","data","handleAddNew","post","_res$data$docs","docs","code","activity","user","handleDelete","handleEdit","fee","onDelete","delete","error","filter","e","_id","i","deleted","find","catch","err","children","fileName","_jsxFileName","lineNumber","columnNumber","className","to","onSubmit","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/AdminComponents/finance/setfees/SetFees.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport FeesTable from \"./FeesTable\";\nimport axios from \"../../../store/axios\";\nimport AddType from \"./AddFessModel\";\nimport DeleteModel from \"./DeleteFeesModal\";\nimport { errorAlert } from \"../../../utils\";\nimport EditFees from \"./EditFees\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectFees, setfeesType } from \"../../../store/slices/schoolSlice\";\n\nconst tableHeader = [\n  { id: \"code\", name: \"Fees Type\" },\n  { id: \"day\", name: \" Day\" },\n  { id: \"freshDay\", name: \"Fresh Day\" },\n  { id: \"border\", name: \"Border\" },\n  { id: \"freshBorder\", name: \"Fresh Border\" },\n];\n\nfunction SetFees() {\n  const [fees, setfees] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [openEdit, setopenEdit] = useState(false);\n  const [name, setname] = useState(\"\");\n  const [deleteID, setdeleteID] = useState(\"\");\n  const [openDelete, setopenDelete] = useState(false);\n  const [loading, setloading] = useState(false);\n  const [deleteloading, setdeleteloading] = useState(false);\n  const [editFee, seteditFee] = useState({});\n  const dispatch = useDispatch();\n  const feesType = useSelector(selectFees);\n\n  useEffect(() => {\n    axios.get(\"/fees\").then((res) => {\n      console.log(res.data);\n      setfees(res.data);\n    });\n  }, []);\n\n  const handleAddNew = () => {\n    setloading(true);\n    axios.post(\"/fees/create\", { name }).then(async (res) => {\n      setloading(false);\n      setfees([res.data.docs, ...fees]);\n      dispatch(setfeesType([...feesType, { name, code: res.data.docs?.code }]));\n      setOpen(false);\n      setname(\"\");\n      await axios.post(\"/activitylog/create\", {\n        activity: ` ${name} fees type was created`,\n        user: \"admin\",\n      });\n    });\n  };\n\n  const handleDelete = (id) => {\n    setopenDelete(true);\n    setdeleteID(id);\n  };\n\n  const handleEdit = (fee) => {\n    console.log(fee, \"clicked\");\n    seteditFee(fee);\n    setopenEdit(true);\n  };\n\n  const onDelete = () => {\n    setdeleteloading(true);\n    axios\n      .delete(`/fees/delete/${deleteID}`)\n      .then(async (res) => {\n        setdeleteloading(false);\n        if (res.data.error) {\n          errorAlert(res.data.error);\n          return 0;\n        }\n        setopenDelete(false);\n        setfees(fees.filter((e) => e._id !== deleteID));\n        dispatch(setfeesType(feesType.filter((i) => i._id !== deleteID)));\n        let deleted = fees.find((e) => e._id === deleteID);\n        await axios.post(\"/activitylog/create\", {\n          activity: ` ${deleted?.name} fees  was deleted`,\n          user: \"admin\",\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n        errorAlert(\"error occurred\");\n      });\n  };\n\n  return (\n    <div>\n      <h3>Current School Fees </h3>\n      <div className=\" row mb-3\">\n        <div className=\"d-flex justify-content-end\">\n          <Link className=\"btn blue__btn ml-3\" to=\"/finance/fees/set\">\n            {\" \"}\n            Set Fees\n          </Link>\n          {/* <button\n            onClick={() => setOpen(true)}\n            className=\"btn blue__btn ml-3\"\n            to=\"/finance/fees/set\"\n          >\n            Add Fees Type\n          </button> */}\n        </div>\n      </div>\n      <FeesTable\n        handleDelete={handleDelete}\n        handleEdit={handleEdit}\n        tableHeader={tableHeader}\n        data={fees}\n      />\n      <AddType\n        open={open}\n        name={name}\n        onSubmit={handleAddNew}\n        loading={loading}\n        setname={setname}\n        setOpen={setOpen}\n      />\n      <DeleteModel\n        handleDelete={onDelete}\n        loading={deleteloading}\n        open={openDelete}\n        setOpen={setopenDelete}\n      />\n      <EditFees\n        setfees={setfees}\n        fees={fees}\n        open={openEdit}\n        fee={editFee}\n        setOpen={setopenEdit}\n      />\n    </div>\n  );\n}\n\nexport default SetFees;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}