{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\TeachersComponents\\\\message\\\\MessageStudent.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport SendForm from \"../../components/messages/SendToForm\";\nimport axios from \"../../store/axios\";\nimport { errorAlert, successAlert } from \"../../utils\";\nimport { useSelector } from \"react-redux\";\nimport { selectClasses } from \"../../store/slices/schoolSlice\";\nimport { selectUser } from \"../../store/slices/userSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MessageStudent() {\n  _s();\n  const [message, setmessage] = useState(\"\");\n  const [recipient, setrecipient] = useState(\"\");\n  const [recipientOptions, setrecipientsOptions] = useState([]);\n  const sender = useSelector(selectUser);\n  const classes = useSelector(selectClasses);\n  const [search, setsearch] = useState(\"\");\n  const handleSearchbyName = e => {\n    e.preventDefault();\n    axios.get(`/students/search/${search}`).then(res => {\n      if (res.data.error) {\n        console.log(\"error\");\n        errorAlert(res.data.error);\n        return 0;\n      }\n      if (res.data.users.length <= 0) {\n        return errorAlert(\"No students Find\");\n      }\n      setsearch(\"\");\n      setrecipientsOptions(res.data.users.map(user => {\n        return {\n          id: user.userID,\n          name: user.name,\n          surname: user.surname\n        };\n      }));\n      console.log(recipientOptions);\n    });\n  };\n  const handleSearchbyClass = e => {\n    axios.get(`/students/class/${e}`).then(res => {\n      console.log(res.data);\n      if (res.data.error) {\n        console.log(\"error\");\n        errorAlert(res.data.error);\n        return 0;\n      }\n      setrecipientsOptions(res.data.users.map(user => {\n        return {\n          id: user.userID,\n          name: user.name,\n          surname: user.surname\n        };\n      }));\n    });\n  };\n  const onSend = e => {\n    e.preventDefault();\n    if (message && recipient) {\n      axios.post(`/chats/user`, {\n        message,\n        sender: sender === null || sender === void 0 ? void 0 : sender.id,\n        userID: recipient\n      }).then(res => {\n        if (res.data.error) {\n          errorAlert(res.data.error);\n          return 0;\n        }\n        successAlert(\"message send\");\n        setmessage(\"\");\n      });\n    }\n  };\n  const searchOptions = () => {\n    return recipientOptions.map(e => /*#__PURE__*/_jsxDEV(\"option\", {\n      value: e.id,\n      children: [e.id, \" - \", e.name, \" \", e.surname]\n    }, e.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-5 content__container row\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Select Student \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        action: \"\",\n        onSubmit: handleSearchbyName,\n        className: \"mb-5 col-md-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Search Student by Name or Student ID\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: search,\n          onChange: e => setsearch(e.target.value),\n          className: \"form-control\",\n          type: \"text\",\n          placeholder: \"Type here...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"OR Select Student's Class\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          onChange: e => handleSearchbyClass(e.target.value),\n          id: \"inputState\",\n          className: \"form-select\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            defaultValue: true,\n            hidden: true,\n            children: \"Choose...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this), classes.map(e => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: e.classCode,\n            children: e.name\n          }, e._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SendForm, {\n      message: message,\n      setmessage: setmessage,\n      onSend: onSend,\n      recipientsOptions: recipientOptions,\n      recipient: recipient,\n      searchOptions: searchOptions,\n      sendto: \"Students\",\n      setrecipient: setrecipient,\n      sender: sender === null || sender === void 0 ? void 0 : sender.id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n_s(MessageStudent, \"fH/u9nL50LgvqP9TW7q69bzpJtg=\", false, function () {\n  return [useSelector, useSelector];\n});\n_c = MessageStudent;\nexport default MessageStudent;\nvar _c;\n$RefreshReg$(_c, \"MessageStudent\");","map":{"version":3,"names":["React","useState","SendForm","axios","errorAlert","successAlert","useSelector","selectClasses","selectUser","jsxDEV","_jsxDEV","MessageStudent","_s","message","setmessage","recipient","setrecipient","recipientOptions","setrecipientsOptions","sender","classes","search","setsearch","handleSearchbyName","e","preventDefault","get","then","res","data","error","console","log","users","length","map","user","id","userID","name","surname","handleSearchbyClass","onSend","post","searchOptions","value","children","fileName","_jsxFileName","lineNumber","columnNumber","className","action","onSubmit","onChange","target","type","placeholder","defaultValue","hidden","classCode","_id","recipientsOptions","sendto","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/TeachersComponents/message/MessageStudent.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport SendForm from \"../../components/messages/SendToForm\";\nimport axios from \"../../store/axios\";\nimport { errorAlert, successAlert } from \"../../utils\";\nimport { useSelector } from \"react-redux\";\nimport { selectClasses } from \"../../store/slices/schoolSlice\";\nimport { selectUser } from \"../../store/slices/userSlice\";\n\nfunction MessageStudent() {\n  const [message, setmessage] = useState(\"\");\n  const [recipient, setrecipient] = useState(\"\");\n  const [recipientOptions, setrecipientsOptions] = useState([]);\n  const sender = useSelector(selectUser);\n  const classes = useSelector(selectClasses);\n  const [search, setsearch] = useState(\"\");\n\n  const handleSearchbyName = (e) => {\n    e.preventDefault();\n    axios.get(`/students/search/${search}`).then((res) => {\n      if (res.data.error) {\n        console.log(\"error\");\n        errorAlert(res.data.error);\n        return 0;\n      }\n      if (res.data.users.length <= 0) {\n        return errorAlert(\"No students Find\");\n      }\n      setsearch(\"\");\n      setrecipientsOptions(\n        res.data.users.map((user) => {\n          return {\n            id: user.userID,\n            name: user.name,\n            surname: user.surname,\n          };\n        })\n      );\n      console.log(recipientOptions);\n    });\n  };\n\n  const handleSearchbyClass = (e) => {\n    axios.get(`/students/class/${e}`).then((res) => {\n      console.log(res.data);\n      if (res.data.error) {\n        console.log(\"error\");\n        errorAlert(res.data.error);\n        return 0;\n      }\n      setrecipientsOptions(\n        res.data.users.map((user) => {\n          return {\n            id: user.userID,\n            name: user.name,\n            surname: user.surname,\n          };\n        })\n      );\n    });\n  };\n\n  const onSend = (e) => {\n    e.preventDefault();\n    if (message && recipient) {\n      axios\n        .post(`/chats/user`, {\n          message,\n          sender: sender?.id,\n          userID: recipient,\n        })\n        .then((res) => {\n          if (res.data.error) {\n            errorAlert(res.data.error);\n            return 0;\n          }\n          successAlert(\"message send\");\n          setmessage(\"\");\n        });\n    }\n  };\n\n  const searchOptions = () => {\n    return recipientOptions.map((e) => (\n      <option key={e.id} value={e.id}>\n        {e.id} - {e.name} {e.surname}\n      </option>\n    ));\n  };\n\n  return (\n    <div>\n      <div className=\"mb-5 content__container row\">\n        <h3>Select Student </h3>\n        <form action=\"\" onSubmit={handleSearchbyName} className=\"mb-5 col-md-6\">\n          <label className=\"form-label\">\n            Search Student by Name or Student ID\n          </label>\n          <input\n            value={search}\n            onChange={(e) => setsearch(e.target.value)}\n            className=\"form-control\"\n            type=\"text\"\n            placeholder=\"Type here...\"\n          />\n        </form>\n        <div className=\"col-md-5\">\n          <label className=\"form-label\">OR Select Student's Class</label>\n          <select\n            onChange={(e) => handleSearchbyClass(e.target.value)}\n            id=\"inputState\"\n            className=\"form-select\"\n          >\n            <option defaultValue hidden>\n              Choose...\n            </option>\n            {classes.map((e) => (\n              <option key={e._id} value={e.classCode}>\n                {e.name}\n              </option>\n            ))}\n          </select>\n        </div>\n      </div>\n      <SendForm\n        message={message}\n        setmessage={setmessage}\n        onSend={onSend}\n        recipientsOptions={recipientOptions}\n        recipient={recipient}\n        searchOptions={searchOptions}\n        sendto=\"Students\"\n        setrecipient={setrecipient}\n        sender={sender?.id}\n      />\n    </div>\n  );\n}\n\nexport default MessageStudent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}