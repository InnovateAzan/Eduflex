{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\AdminComponents\\\\academics\\\\classGroups\\\\Classgroup.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport ClassgroupTable from \"../../shared/ListTable\";\nimport axios from \"../../../store/axios\";\nimport { errorAlert, successAlert } from \"../../../utils\";\nimport AddClassgroup from \"./AddClassGroup\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport { useDispatch } from \"react-redux\";\nimport { setfeesType } from \"../../../store/slices/schoolSlice\";\nimport Loading from \"../../../Loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst tableHeadings = [{\n  id: \"createdAt\",\n  name: \"Created At\"\n}, {\n  id: \"name\",\n  name: \"Name\"\n}];\nfunction Classgroup() {\n  _s();\n  const [loading, setloading] = useState(false);\n  const [classgroup, setclassgroup] = useState([]);\n  const [name, setname] = useState(\"\");\n  const [storedata, setstoredata] = useState([]);\n  const [addLoading, setaddLoading] = useState(false);\n  const [searchQuery, setsearchQuery] = useState(\"\");\n  const dispatch = useDispatch();\n  useEffect(() => {\n    setloading(true);\n    axios.get(\"/fees\").then(res => {\n      setclassgroup(res.data);\n      console.log(res.data);\n      setstoredata(res.data);\n      setloading(false);\n    });\n  }, []);\n  const handleDelete = id => {\n    const ans = window.confirm(\"are you sure you want to delete\");\n    if (ans) {\n      axios.delete(`/fees/delete/${id}`).then(async res => {\n        if (res.data.error) {\n          errorAlert(res.data.error);\n          return 0;\n        }\n        await axios.post(\"/activitylog/create\", {\n          activity: ` class group was ${id} deleted`,\n          user: \"admin\"\n        });\n        setclassgroup(classgroup.filter(e => e._id !== id));\n        dispatch(setfeesType(classgroup.filter(e => e._id !== id)));\n      });\n    }\n  };\n  const handleAdd = () => {\n    setaddLoading(true);\n    axios.post(\"/fees/create\", {\n      name\n    }).then(async res => {\n      var _res$data$docs;\n      setaddLoading(false);\n      setclassgroup([res.data.docs, ...classgroup]);\n      successAlert(\"Successfully created\");\n      dispatch(setfeesType([...classgroup, {\n        name,\n        code: (_res$data$docs = res.data.docs) === null || _res$data$docs === void 0 ? void 0 : _res$data$docs.code\n      }]));\n      setname(\"\");\n      await axios.post(\"/activitylog/create\", {\n        activity: `new class group ${name}`,\n        user: \"admin\"\n      });\n    }).catch(err => {\n      console.log(err);\n      errorAlert(\"Failed to add\");\n      setaddLoading(false);\n    });\n  };\n  const handleSearch = e => {\n    e.preventDefault();\n    let newClasses = [];\n    if (searchQuery) {\n      newClasses = storedata.filter(i => i === null || i === void 0 ? void 0 : i.name.toLowerCase().includes(searchQuery === null || searchQuery === void 0 ? void 0 : searchQuery.toLowerCase()));\n    }\n    setclassgroup(newClasses);\n  };\n  const handleReset = e => {\n    e.preventDefault();\n    setclassgroup(storedata);\n    setsearchQuery(\"\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [loading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm-6\",\n      children: /*#__PURE__*/_jsxDEV(AddClassgroup, {\n        name: name,\n        setname: setname,\n        loading: addLoading,\n        onSubmit: handleAdd\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content__container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Class Groups\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleReset,\n            className: \"d-flex\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Search...\",\n              value: searchQuery,\n              onChange: e => setsearchQuery(e.target.value),\n              type: \"text\",\n              className: \"form-control\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this), searchQuery && /*#__PURE__*/_jsxDEV(CancelIcon, {\n              onClick: handleReset\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 31\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ClassgroupTable, {\n        handleDelete: handleDelete,\n        data: classgroup,\n        isEdit: true,\n        handleSearch: handleSearch,\n        tableHeader: tableHeadings\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n_s(Classgroup, \"L2f1pFcM6MaRyUaLK+GgIYg+nD8=\", false, function () {\n  return [useDispatch];\n});\n_c = Classgroup;\nexport default Classgroup;\nvar _c;\n$RefreshReg$(_c, \"Classgroup\");","map":{"version":3,"names":["React","useState","useEffect","ClassgroupTable","axios","errorAlert","successAlert","AddClassgroup","CancelIcon","useDispatch","setfeesType","Loading","jsxDEV","_jsxDEV","tableHeadings","id","name","Classgroup","_s","loading","setloading","classgroup","setclassgroup","setname","storedata","setstoredata","addLoading","setaddLoading","searchQuery","setsearchQuery","dispatch","get","then","res","data","console","log","handleDelete","ans","window","confirm","delete","error","post","activity","user","filter","e","_id","handleAdd","_res$data$docs","docs","code","catch","err","handleSearch","preventDefault","newClasses","i","toLowerCase","includes","handleReset","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","value","onChange","target","type","onClick","isEdit","tableHeader","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/AdminComponents/academics/classGroups/Classgroup.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ClassgroupTable from \"../../shared/ListTable\";\nimport axios from \"../../../store/axios\";\nimport { errorAlert, successAlert } from \"../../../utils\";\nimport AddClassgroup from \"./AddClassGroup\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport { useDispatch } from \"react-redux\";\nimport { setfeesType } from \"../../../store/slices/schoolSlice\";\nimport Loading from \"../../../Loading\";\n\nconst tableHeadings = [\n  { id: \"createdAt\", name: \"Created At\" },\n  { id: \"name\", name: \"Name\" },\n];\n\nfunction Classgroup() {\n  const [loading, setloading] = useState(false);\n  const [classgroup, setclassgroup] = useState([]);\n  const [name, setname] = useState(\"\");\n  const [storedata, setstoredata] = useState([]);\n  const [addLoading, setaddLoading] = useState(false);\n  const [searchQuery, setsearchQuery] = useState(\"\");\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    setloading(true);\n    axios.get(\"/fees\").then((res) => {\n      setclassgroup(res.data);\n      console.log(res.data);\n      setstoredata(res.data);\n      setloading(false);\n    });\n  }, []);\n\n  const handleDelete = (id) => {\n    const ans = window.confirm(\"are you sure you want to delete\");\n    if (ans) {\n      axios.delete(`/fees/delete/${id}`).then(async (res) => {\n        if (res.data.error) {\n          errorAlert(res.data.error);\n          return 0;\n        }\n        await axios.post(\"/activitylog/create\", {\n          activity: ` class group was ${id} deleted`,\n          user: \"admin\",\n        });\n        setclassgroup(classgroup.filter((e) => e._id !== id));\n        dispatch(setfeesType(classgroup.filter((e) => e._id !== id)));\n      });\n    }\n  };\n\n  const handleAdd = () => {\n    setaddLoading(true);\n    axios\n      .post(\"/fees/create\", { name })\n      .then(async (res) => {\n        setaddLoading(false);\n        setclassgroup([res.data.docs, ...classgroup]);\n        successAlert(\"Successfully created\");\n        dispatch(\n          setfeesType([...classgroup, { name, code: res.data.docs?.code }])\n        );\n        setname(\"\");\n        await axios.post(\"/activitylog/create\", {\n          activity: `new class group ${name}`,\n          user: \"admin\",\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n        errorAlert(\"Failed to add\");\n        setaddLoading(false);\n      });\n  };\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    let newClasses = [];\n    if (searchQuery) {\n      newClasses = storedata.filter((i) =>\n        i?.name.toLowerCase().includes(searchQuery?.toLowerCase())\n      );\n    }\n    setclassgroup(newClasses);\n  };\n\n  const handleReset = (e) => {\n    e.preventDefault();\n    setclassgroup(storedata);\n    setsearchQuery(\"\");\n  };\n\n  return (\n    <div className=\"row\">\n      {loading && <Loading />}\n      <div className=\"col-sm-6\">\n        <AddClassgroup\n          name={name}\n          setname={setname}\n          loading={addLoading}\n          onSubmit={handleAdd}\n        />\n      </div>\n      <div className=\"col-sm-6\">\n        <div className=\"content__container\">\n          <div className=\"d-flex justify-content-between\">\n            <h3>Class Groups</h3>\n            <form onSubmit={handleReset} className=\"d-flex\">\n              <input\n                placeholder=\"Search...\"\n                value={searchQuery}\n                onChange={(e) => setsearchQuery(e.target.value)}\n                type=\"text\"\n                className=\"form-control\"\n              />\n              {searchQuery && <CancelIcon onClick={handleReset} />}\n            </form>\n          </div>\n        </div>\n        <ClassgroupTable\n          handleDelete={handleDelete}\n          data={classgroup}\n          isEdit={true}\n          handleSearch={handleSearch}\n          tableHeader={tableHeadings}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Classgroup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}