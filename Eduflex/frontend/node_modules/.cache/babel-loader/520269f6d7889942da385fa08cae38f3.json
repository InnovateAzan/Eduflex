{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\AdminComponents\\\\academics\\\\notes\\\\AddNote.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport AddForm from \"./NoteForm\";\nimport axios from \"../../../store/axios\";\nimport { errorAlert, successAlert } from \"../../../utils\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../../store/slices/userSlice\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AddNote() {\n  _s();\n  const [classID, setclassID] = useState(\"\");\n  const [subject, setsubject] = useState(\"\");\n  const [topic, settopic] = useState(\"\");\n  const [notes, setnotes] = useState(\"\");\n  const [file, setfile] = useState(\"\");\n  const user = useSelector(selectUser);\n  const [loading, setloading] = useState(false);\n  const handleAddNote = async () => {\n    if (!classID) {\n      return errorAlert(\"Please select class\");\n    }\n    if (!subject) {\n      return errorAlert(\"Please select course\");\n    }\n    if (!file) {\n      return errorAlert(\"Please select file\");\n    }\n    setloading(true);\n    const data = await axios.post(\"/upload\", {\n      dataUrl: file\n    });\n    if (data.data.error) {\n      return errorAlert(\"The file is too big\");\n    }\n    const path = data.data.url;\n    console.log(path);\n    await axios.post(\"/notes/create\", {\n      topic,\n      classID,\n      courseID: subject,\n      notes,\n      file: path,\n      senderID: user === null || user === void 0 ? void 0 : user.id\n    }).then(response => {\n      console.log(response.data);\n      if (response.data.error) {\n        errorAlert(response.data.error);\n        setloading(false);\n        return 0;\n      }\n      successAlert(\"notes successfully added\");\n      setloading(false);\n      handleResetNote();\n    }).catch(err => {\n      console.log(err);\n      setloading(false);\n      errorAlert(\"File is too big\");\n    });\n  };\n  const handleSetFile = async e => {\n    const selected = e.target.files[0]; //await imageCompression(e.target.files[0], options);\n    if ((selected === null || selected === void 0 ? void 0 : selected.size) > 2000000) {\n      return errorAlert(\"image is too large\");\n    }\n    //setfile(selected);\n    const fileReader = new FileReader();\n    fileReader.readAsDataURL(selected);\n    fileReader.onloadend = () => {\n      setfile(fileReader.result);\n    };\n  };\n  const handleResetNote = () => {\n    setclassID(\"\");\n    setsubject(\"\");\n    settopic(\"\");\n    setnotes(\"\");\n    setfile(\"\");\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content__container mb-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Add Notes File\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AddForm, {\n        classID: classID,\n        setclass: setclassID,\n        subject: subject,\n        setsubject: setsubject,\n        topic: topic,\n        settopic: settopic,\n        file: file,\n        loading: loading,\n        handleReset: handleResetNote,\n        setfile: handleSetFile,\n        role: user === null || user === void 0 ? void 0 : user.role,\n        handleAdd: handleAddNote,\n        notes: notes,\n        setnotes: setnotes\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(AddNote, \"E/ZP1Q5y+NKvR2uI5h6tDfvEfw8=\", false, function () {\n  return [useSelector];\n});\n_c = AddNote;\nexport default AddNote;\nvar _c;\n$RefreshReg$(_c, \"AddNote\");","map":{"version":3,"names":["React","useState","AddForm","axios","errorAlert","successAlert","useSelector","selectUser","jsxDEV","_jsxDEV","Fragment","_Fragment","AddNote","_s","classID","setclassID","subject","setsubject","topic","settopic","notes","setnotes","file","setfile","user","loading","setloading","handleAddNote","data","post","dataUrl","error","path","url","console","log","courseID","senderID","id","then","response","handleResetNote","catch","err","handleSetFile","e","selected","target","files","size","fileReader","FileReader","readAsDataURL","onloadend","result","children","className","fileName","_jsxFileName","lineNumber","columnNumber","setclass","handleReset","role","handleAdd","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/AdminComponents/academics/notes/AddNote.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport AddForm from \"./NoteForm\";\nimport axios from \"../../../store/axios\";\nimport { errorAlert, successAlert } from \"../../../utils\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../../../store/slices/userSlice\";\n\nfunction AddNote() {\n  const [classID, setclassID] = useState(\"\");\n  const [subject, setsubject] = useState(\"\");\n  const [topic, settopic] = useState(\"\");\n  const [notes, setnotes] = useState(\"\");\n  const [file, setfile] = useState(\"\");\n  const user = useSelector(selectUser);\n  const [loading, setloading] = useState(false);\n\n  const handleAddNote = async () => {\n    if (!classID) {\n      return errorAlert(\"Please select class\");\n    }\n    if (!subject) {\n      return errorAlert(\"Please select course\");\n    }\n    if (!file) {\n      return errorAlert(\"Please select file\");\n    }\n    setloading(true);\n    const data = await axios.post(\"/upload\", { dataUrl: file });\n    if (data.data.error) {\n      return errorAlert(\"The file is too big\");\n    }\n    const path = data.data.url;\n    console.log(path);\n    await axios\n      .post(\"/notes/create\", {\n        topic,\n        classID,\n        courseID: subject,\n        notes,\n        file: path,\n        senderID: user?.id,\n      })\n      .then((response) => {\n        console.log(response.data);\n        if (response.data.error) {\n          errorAlert(response.data.error);\n          setloading(false);\n          return 0;\n        }\n        successAlert(\"notes successfully added\");\n        setloading(false);\n        handleResetNote();\n      })\n\n      .catch((err) => {\n        console.log(err);\n        setloading(false);\n        errorAlert(\"File is too big\");\n      });\n  };\n\n  const handleSetFile = async (e) => {\n    const selected = e.target.files[0]; //await imageCompression(e.target.files[0], options);\n    if (selected?.size > 2000000) {\n      return errorAlert(\"image is too large\");\n    }\n    //setfile(selected);\n    const fileReader = new FileReader();\n    fileReader.readAsDataURL(selected);\n    fileReader.onloadend = () => {\n      setfile(fileReader.result);\n    };\n  };\n  const handleResetNote = () => {\n    setclassID(\"\");\n    setsubject(\"\");\n    settopic(\"\");\n    setnotes(\"\");\n    setfile(\"\");\n  };\n\n  return (\n    <>\n      <div className=\"content__container mb-5\">\n        <h3>Add Notes File</h3>\n        <AddForm\n          classID={classID}\n          setclass={setclassID}\n          subject={subject}\n          setsubject={setsubject}\n          topic={topic}\n          settopic={settopic}\n          file={file}\n          loading={loading}\n          handleReset={handleResetNote}\n          setfile={handleSetFile}\n          role={user?.role}\n          handleAdd={handleAddNote}\n          notes={notes}\n          setnotes={setnotes}\n        />\n      </div>\n    </>\n  );\n}\n\nexport default AddNote;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}