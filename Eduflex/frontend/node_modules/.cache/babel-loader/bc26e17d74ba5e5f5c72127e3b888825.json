{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\AdminComponents\\\\finance\\\\staffPayrow\\\\AllPayrow.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport ListTable from \"../billPayment/PaymentTable\";\nimport Search from \"../../shared/Search\";\nimport { useSelector } from \"react-redux\";\nimport { selectStaff } from \"../../../store/slices/schoolSlice\";\nimport axios from \"../../../store/axios\";\nimport { Link } from \"react-router-dom\";\nimport { errorAlert, currentCurrency } from \"../../../utils\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst tableHeader = [{\n  id: \"date\",\n  name: \"Date\"\n}, {\n  id: \"userID\",\n  name: \"Staff ID\"\n}, {\n  id: \"name\",\n  name: \"Name\"\n}, {\n  id: \"bank\",\n  name: \"Bank\"\n}, {\n  id: \"accountNumber\",\n  name: \"Account Number\"\n}, {\n  id: \"amount\",\n  name: `Total Salary (${currentCurrency()})`\n}];\nfunction PayrowAll() {\n  _s();\n  const [data, setdata] = useState([]);\n  const [storeData, setstoreData] = useState([]);\n  const [status, setstatus] = useState(\"\");\n  const staff = useSelector(selectStaff);\n  const history = useHistory();\n  useEffect(() => {\n    axios.get(\"/transactions/staff/pay\").then(res => {\n      console.log(res.data);\n      let payrowStaff = res.data.map(e => {\n        var _staff$find, _staff$find2;\n        return {\n          ...e,\n          name: ((_staff$find = staff.find(i => i.userID === e.userID)) === null || _staff$find === void 0 ? void 0 : _staff$find.name) + \" \" + ((_staff$find2 = staff.find(i => i.userID === e.userID)) === null || _staff$find2 === void 0 ? void 0 : _staff$find2.surname)\n        };\n      });\n      setdata(payrowStaff);\n      setstoreData(payrowStaff);\n    });\n  }, [staff]);\n  const inputFields = [{\n    label: \"Search by Staff Member\",\n    type: \"select\",\n    value: status,\n    onChange: setstatus,\n    options: staff && staff.map(e => {\n      return {\n        id: e === null || e === void 0 ? void 0 : e.userID,\n        name: (e === null || e === void 0 ? void 0 : e.name) + \" \" + (e === null || e === void 0 ? void 0 : e.surname) + \" -\" + (e === null || e === void 0 ? void 0 : e.userID)\n      };\n    })\n  }];\n  const handleDelete = id => {\n    axios.delete(`/transactions/delete/${id}`).then(res => {\n      if (res.data.error) {\n        errorAlert(res.data.error);\n      }\n      setdata(data.filter(e => e._id !== id));\n    });\n  };\n  const handleSearch = e => {\n    e.preventDefault();\n    let newData = [];\n    if (status) {\n      newData = storeData.filter(i => {\n        var _i$userID;\n        return i === null || i === void 0 ? void 0 : (_i$userID = i.userID) === null || _i$userID === void 0 ? void 0 : _i$userID.toLowerCase().includes(status === null || status === void 0 ? void 0 : status.toLowerCase());\n      });\n    }\n    setdata(newData);\n  };\n  const handleEdit = id => {\n    axios.get(`/transactions/${id}`).then(async res => {\n      var _res$data, _res$data$pay;\n      history.push(`/finance/staff/payrow/payslip/${(_res$data = res.data) === null || _res$data === void 0 ? void 0 : (_res$data$pay = _res$data.pay) === null || _res$data$pay === void 0 ? void 0 : _res$data$pay.userID}`);\n    });\n  };\n  const handleReset = e => {\n    e.preventDefault();\n    setdata(storeData);\n    setstatus(\"\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"float-right mb-5\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        className: \"btn blue__btn\",\n        to: \"/finance/staff/payrow/pay\",\n        children: \"Staff Salary Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \" mb-5\",\n      children: \"Staff Salary Transactions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Search, {\n      title: \"Filter Staff\",\n      handleSearch: handleSearch,\n      handleReset: handleReset,\n      inputFields: inputFields\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ListTable, {\n      data: data,\n      handleEdit: handleEdit,\n      handleDelete: handleDelete,\n      noData: \"No salary payments yet\",\n      tableHeader: tableHeader\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n_s(PayrowAll, \"BJH/34ktEH9bWX9X8JrEuH15QoE=\", false, function () {\n  return [useSelector, useHistory];\n});\n_c = PayrowAll;\nexport default PayrowAll;\nvar _c;\n$RefreshReg$(_c, \"PayrowAll\");","map":{"version":3,"names":["React","useState","useEffect","ListTable","Search","useSelector","selectStaff","axios","Link","errorAlert","currentCurrency","useHistory","jsxDEV","_jsxDEV","tableHeader","id","name","PayrowAll","_s","data","setdata","storeData","setstoreData","status","setstatus","staff","history","get","then","res","console","log","payrowStaff","map","e","_staff$find","_staff$find2","find","i","userID","surname","inputFields","label","type","value","onChange","options","handleDelete","delete","error","filter","_id","handleSearch","preventDefault","newData","_i$userID","toLowerCase","includes","handleEdit","_res$data","_res$data$pay","push","pay","handleReset","children","className","to","fileName","_jsxFileName","lineNumber","columnNumber","title","noData","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/AdminComponents/finance/staffPayrow/AllPayrow.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ListTable from \"../billPayment/PaymentTable\";\nimport Search from \"../../shared/Search\";\nimport { useSelector } from \"react-redux\";\nimport { selectStaff } from \"../../../store/slices/schoolSlice\";\nimport axios from \"../../../store/axios\";\nimport { Link } from \"react-router-dom\";\nimport { errorAlert, currentCurrency } from \"../../../utils\";\nimport { useHistory } from \"react-router-dom\";\n\nconst tableHeader = [\n  { id: \"date\", name: \"Date\" },\n  { id: \"userID\", name: \"Staff ID\" },\n  { id: \"name\", name: \"Name\" },\n  { id: \"bank\", name: \"Bank\" },\n  { id: \"accountNumber\", name: \"Account Number\" },\n  { id: \"amount\", name: `Total Salary (${currentCurrency()})` },\n];\n\nfunction PayrowAll() {\n  const [data, setdata] = useState([]);\n  const [storeData, setstoreData] = useState([]);\n  const [status, setstatus] = useState(\"\");\n  const staff = useSelector(selectStaff);\n  const history = useHistory();\n\n  useEffect(() => {\n    axios.get(\"/transactions/staff/pay\").then((res) => {\n      console.log(res.data);\n      let payrowStaff = res.data.map((e) => {\n        return {\n          ...e,\n          name:\n            staff.find((i) => i.userID === e.userID)?.name +\n            \" \" +\n            staff.find((i) => i.userID === e.userID)?.surname,\n        };\n      });\n      setdata(payrowStaff);\n      setstoreData(payrowStaff);\n    });\n  }, [staff]);\n\n  const inputFields = [\n    {\n      label: \"Search by Staff Member\",\n      type: \"select\",\n      value: status,\n      onChange: setstatus,\n      options:\n        staff &&\n        staff.map((e) => {\n          return {\n            id: e?.userID,\n            name: e?.name + \" \" + e?.surname + \" -\" + e?.userID,\n          };\n        }),\n    },\n  ];\n\n  const handleDelete = (id) => {\n    axios.delete(`/transactions/delete/${id}`).then((res) => {\n      if (res.data.error) {\n        errorAlert(res.data.error);\n      }\n      setdata(data.filter((e) => e._id !== id));\n    });\n  };\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    let newData = [];\n    if (status) {\n      newData = storeData.filter((i) =>\n        i?.userID?.toLowerCase().includes(status?.toLowerCase())\n      );\n    }\n    setdata(newData);\n  };\n\n  const handleEdit = (id) => {\n    axios.get(`/transactions/${id}`).then(async (res) => {\n      history.push(`/finance/staff/payrow/payslip/${res.data?.pay?.userID}`);\n    });\n  };\n\n  const handleReset = (e) => {\n    e.preventDefault();\n    setdata(storeData);\n    setstatus(\"\");\n  };\n\n  return (\n    <div>\n      <div className=\"float-right mb-5\">\n        <Link className=\"btn blue__btn\" to=\"/finance/staff/payrow/pay\">\n          Staff Salary Payment\n        </Link>\n      </div>\n      <h3 className=\" mb-5\">Staff Salary Transactions</h3>\n      <Search\n        title=\"Filter Staff\"\n        handleSearch={handleSearch}\n        handleReset={handleReset}\n        inputFields={inputFields}\n      />\n      <ListTable\n        data={data}\n        handleEdit={handleEdit}\n        handleDelete={handleDelete}\n        noData=\"No salary payments yet\"\n        tableHeader={tableHeader}\n      />\n    </div>\n  );\n}\n\nexport default PayrowAll;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}