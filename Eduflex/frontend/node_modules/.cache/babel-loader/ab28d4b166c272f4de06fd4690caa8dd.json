{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\AdminComponents\\\\attendance\\\\StudentAttendance\\\\StudentsAttendanceRegister.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport Table from \"../../shared/RegisterAttendance\";\nimport axios from \"../../../store/axios\";\nimport { errorAlert } from \"../../../utils\";\nimport { useSelector } from \"react-redux\";\nimport moment from \"moment\";\nimport { selectClasses } from \"../../../store/slices/schoolSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RegisterAttendance() {\n  _s();\n  const [classID, setclassID] = useState(\"\");\n  const [loading, setloading] = useState(false);\n  const [students, setstudents] = useState([]);\n  const classes = useSelector(selectClasses);\n  const handleChange = e => {\n    setclassID(e.target.value);\n    axios.get(`/students/class/${e.target.value}`).then(res => {\n      var _res$data$users;\n      if (res.data.error) {\n        errorAlert(res.data.error);\n      }\n      let data = (_res$data$users = res.data.users) === null || _res$data$users === void 0 ? void 0 : _res$data$users.map(student => {\n        return {\n          userID: student.userID,\n          name: student.name,\n          surname: student.surname,\n          status: false\n        };\n      });\n      setstudents(data);\n    });\n  };\n  const handleRegisterAttendance = () => {\n    setloading(true);\n    axios.post(\"/attendance/register\", {\n      users: students,\n      classID,\n      role: \"students\"\n    }).then(res => {\n      setloading(false);\n      if (res.data.error) {\n        errorAlert(res.data.error);\n        return 0;\n      }\n    }).catch(err => {\n      setloading(false);\n      errorAlert(\"Sorry something when wrong\");\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content__container mb-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Register Today's Attendance\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Search Students in Class\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: classID,\n          name: \"class\",\n          onChange: handleChange,\n          className: \"form-select form-select-sm py-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            hidden: true,\n            defaultValue: true,\n            children: \"Select\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), classes.length > 0 ? classes.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: option.classCode,\n            children: option.name\n          }, option.classCode, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(\"option\", {\n            disabled: true,\n            children: \"No classes yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), classID && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\" Class \", classID]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: moment().format(\"dddd D MMMM YYYY\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        attendanceData: students,\n        handleRegister: handleRegisterAttendance,\n        loading: loading,\n        isClass: true,\n        setattendanceData: setstudents\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(RegisterAttendance, \"dlVFr4zWRlASul9UDWumuNgpvMs=\", false, function () {\n  return [useSelector];\n});\n_c = RegisterAttendance;\nexport default RegisterAttendance;\nvar _c;\n$RefreshReg$(_c, \"RegisterAttendance\");","map":{"version":3,"names":["React","useState","Table","axios","errorAlert","useSelector","moment","selectClasses","jsxDEV","_jsxDEV","RegisterAttendance","_s","classID","setclassID","loading","setloading","students","setstudents","classes","handleChange","e","target","value","get","then","res","_res$data$users","data","error","users","map","student","userID","name","surname","status","handleRegisterAttendance","post","role","catch","err","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onChange","hidden","defaultValue","length","option","classCode","disabled","format","attendanceData","handleRegister","isClass","setattendanceData","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/AdminComponents/attendance/StudentAttendance/StudentsAttendanceRegister.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport Table from \"../../shared/RegisterAttendance\";\nimport axios from \"../../../store/axios\";\nimport { errorAlert } from \"../../../utils\";\nimport { useSelector } from \"react-redux\";\nimport moment from \"moment\";\nimport { selectClasses } from \"../../../store/slices/schoolSlice\";\n\nfunction RegisterAttendance() {\n  const [classID, setclassID] = useState(\"\");\n  const [loading, setloading] = useState(false);\n  const [students, setstudents] = useState([]);\n  const classes = useSelector(selectClasses);\n\n  const handleChange = (e) => {\n    setclassID(e.target.value);\n    axios.get(`/students/class/${e.target.value}`).then((res) => {\n      if (res.data.error) {\n        errorAlert(res.data.error);\n      }\n      let data = res.data.users?.map((student) => {\n        return {\n          userID: student.userID,\n          name: student.name,\n          surname: student.surname,\n          status: false,\n        };\n      });\n      setstudents(data);\n    });\n  };\n\n  const handleRegisterAttendance = () => {\n    setloading(true);\n    axios\n      .post(\"/attendance/register\", {\n        users: students,\n        classID,\n        role: \"students\",\n      })\n      .then((res) => {\n        setloading(false);\n        if (res.data.error) {\n          errorAlert(res.data.error);\n          return 0;\n        }\n      })\n      .catch((err) => {\n        setloading(false);\n        errorAlert(\"Sorry something when wrong\");\n      });\n  };\n\n  return (\n    <div>\n      <div className=\"content__container mb-5\">\n        <h3>Register Today's Attendance</h3>\n        <div>\n          <label>Search Students in Class</label>\n          <select\n            value={classID}\n            name=\"class\"\n            onChange={handleChange}\n            className=\"form-select form-select-sm py-2\"\n          >\n            <option hidden defaultValue>\n              Select\n            </option>\n            {classes.length > 0 ? (\n              classes.map((option) => (\n                <option key={option.classCode} value={option.classCode}>\n                  {option.name}\n                </option>\n              ))\n            ) : (\n              <option disabled>No classes yet</option>\n            )}\n          </select>\n        </div>\n      </div>\n      {classID && (\n        <div className=\"content__container\">\n          <div className=\"d-flex justify-content-between\">\n            <h2> Class {classID}</h2>\n            <div>\n              <strong>{moment().format(\"dddd D MMMM YYYY\")}</strong>\n            </div>\n          </div>\n          <Table\n            attendanceData={students}\n            handleRegister={handleRegisterAttendance}\n            loading={loading}\n            isClass={true}\n            setattendanceData={setstudents}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default RegisterAttendance;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}