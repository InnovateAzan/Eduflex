{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\AdminComponents\\\\academics\\\\classes\\\\EditClass.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport ClassForm from \"./ClassForm\";\nimport axios from \"../../../store/axios\";\nimport { useParams } from \"react-router-dom\";\nimport { successAlert, errorAlert } from \"../../../utils\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectClasses, setClasses } from \"../../../store/slices/schoolSlice\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction EditClass() {\n  _s();\n  const [name, setname] = useState(\"\");\n  const [campus, setcampus] = useState(\"\");\n  const [teacher, setteacher] = useState(\"\");\n  const [code, setcode] = useState(\"\");\n  const [academic, setacademic] = useState(\"\");\n  const [loading, setloading] = useState(false);\n  const [division, setdivision] = useState(\"\");\n  const [group, setgroup] = useState(\"\");\n  const [prefect, setprefect] = useState(\"\");\n  const [sba, setsba] = useState(\"\");\n  const [sbaStaff, setsbaStaff] = useState(false);\n  const {\n    id\n  } = useParams();\n  const dispatch = useDispatch();\n  const classes = useSelector(selectClasses);\n  useEffect(() => {\n    axios.get(`/classes/${id}`).then(res => {\n      if (res.data.error) {\n        errorAlert(res.data.error);\n        return 0;\n      }\n      let doc = res.data.docs;\n      setname(doc === null || doc === void 0 ? void 0 : doc.name);\n      setcampus(doc === null || doc === void 0 ? void 0 : doc.campusID);\n      setteacher(doc === null || doc === void 0 ? void 0 : doc.teacherID);\n      setcode(doc === null || doc === void 0 ? void 0 : doc.classCode);\n      setacademic(doc === null || doc === void 0 ? void 0 : doc.academic);\n      setdivision(doc === null || doc === void 0 ? void 0 : doc.division);\n      setgroup(doc === null || doc === void 0 ? void 0 : doc.group);\n      setsba(doc === null || doc === void 0 ? void 0 : doc.sba);\n      setsbaStaff(doc === null || doc === void 0 ? void 0 : doc.sbaStaff);\n      setprefect(doc === null || doc === void 0 ? void 0 : doc.prefect);\n    });\n  }, [id]);\n  const handleEdit = () => {\n    setloading(true);\n    axios.put(`/classes/update/${id}`, {\n      name,\n      classCode: code,\n      campusID: campus,\n      academic,\n      teacherID: teacher,\n      prefect,\n      division,\n      sba,\n      group,\n      sbaStaff\n    }).then(async res => {\n      setloading(false);\n      if (res.data.error) {\n        errorAlert(res.data.error);\n        setloading(false);\n        return 0;\n      }\n      successAlert(\"successfully edited\");\n      dispatch(setClasses(classes.map(i => {\n        var _res$data;\n        return i._id === id ? (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.doc : i;\n      })));\n      await axios.post(\"/activitylog/create\", {\n        activity: ` ${name} class was edited`,\n        user: \"admin\"\n      });\n      // await axios.post(`/fees/update/name`, {\n      //   name,\n      // });\n    }).catch(() => {\n      errorAlert(\"something went wrong\");\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Edit Class\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ClassForm, {\n        name: name,\n        handleAddClass: handleEdit,\n        setname: setname,\n        campus: campus,\n        academic: academic,\n        setacademic: setacademic,\n        setcampus: setcampus,\n        code: code,\n        loading: loading,\n        setcode: setcode,\n        teacher: teacher,\n        isEdit: true,\n        setdivision: setdivision,\n        division: division,\n        setgroup: setgroup,\n        group: group,\n        setprefect: setprefect,\n        prefects: prefect,\n        sba: sba,\n        setsba: setsba,\n        sbaStaff: sbaStaff,\n        setsbaStaff: setsbaStaff,\n        setteacher: setteacher\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(EditClass, \"0Kh+zfAzJ5FImTAhCfKtkmyAzYE=\", false, function () {\n  return [useParams, useDispatch, useSelector];\n});\n_c = EditClass;\nexport default EditClass;\nvar _c;\n$RefreshReg$(_c, \"EditClass\");","map":{"version":3,"names":["React","useState","useEffect","ClassForm","axios","useParams","successAlert","errorAlert","useDispatch","useSelector","selectClasses","setClasses","jsxDEV","_jsxDEV","Fragment","_Fragment","EditClass","_s","name","setname","campus","setcampus","teacher","setteacher","code","setcode","academic","setacademic","loading","setloading","division","setdivision","group","setgroup","prefect","setprefect","sba","setsba","sbaStaff","setsbaStaff","id","dispatch","classes","get","then","res","data","error","doc","docs","campusID","teacherID","classCode","handleEdit","put","map","i","_res$data","_id","post","activity","user","catch","children","className","fileName","_jsxFileName","lineNumber","columnNumber","handleAddClass","isEdit","prefects","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/AdminComponents/academics/classes/EditClass.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ClassForm from \"./ClassForm\";\nimport axios from \"../../../store/axios\";\nimport { useParams } from \"react-router-dom\";\nimport { successAlert, errorAlert } from \"../../../utils\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectClasses, setClasses } from \"../../../store/slices/schoolSlice\";\n\nfunction EditClass() {\n  const [name, setname] = useState(\"\");\n  const [campus, setcampus] = useState(\"\");\n  const [teacher, setteacher] = useState(\"\");\n  const [code, setcode] = useState(\"\");\n  const [academic, setacademic] = useState(\"\");\n  const [loading, setloading] = useState(false);\n  const [division, setdivision] = useState(\"\");\n  const [group, setgroup] = useState(\"\");\n  const [prefect, setprefect] = useState(\"\");\n  const [sba, setsba] = useState(\"\");\n  const [sbaStaff, setsbaStaff] = useState(false);\n  const { id } = useParams();\n  const dispatch = useDispatch();\n  const classes = useSelector(selectClasses);\n\n  useEffect(() => {\n    axios.get(`/classes/${id}`).then((res) => {\n      if (res.data.error) {\n        errorAlert(res.data.error);\n        return 0;\n      }\n      let doc = res.data.docs;\n      setname(doc?.name);\n      setcampus(doc?.campusID);\n      setteacher(doc?.teacherID);\n      setcode(doc?.classCode);\n      setacademic(doc?.academic);\n      setdivision(doc?.division);\n      setgroup(doc?.group);\n      setsba(doc?.sba);\n      setsbaStaff(doc?.sbaStaff);\n      setprefect(doc?.prefect);\n    });\n  }, [id]);\n\n  const handleEdit = () => {\n    setloading(true);\n    axios\n      .put(`/classes/update/${id}`, {\n        name,\n        classCode: code,\n        campusID: campus,\n        academic,\n        teacherID: teacher,\n        prefect,\n        division,\n        sba,\n        group,\n        sbaStaff,\n      })\n      .then(async (res) => {\n        setloading(false);\n        if (res.data.error) {\n          errorAlert(res.data.error);\n          setloading(false);\n          return 0;\n        }\n        successAlert(\"successfully edited\");\n\n        dispatch(\n          setClasses(classes.map((i) => (i._id === id ? res.data?.doc : i)))\n        );\n        await axios.post(\"/activitylog/create\", {\n          activity: ` ${name} class was edited`,\n          user: \"admin\",\n        });\n        // await axios.post(`/fees/update/name`, {\n        //   name,\n        // });\n      })\n      .catch(() => {\n        errorAlert(\"something went wrong\");\n      });\n  };\n\n  return (\n    <>\n      <div className=\"content__container\">\n        <h3>Edit Class</h3>\n        <ClassForm\n          name={name}\n          handleAddClass={handleEdit}\n          setname={setname}\n          campus={campus}\n          academic={academic}\n          setacademic={setacademic}\n          setcampus={setcampus}\n          code={code}\n          loading={loading}\n          setcode={setcode}\n          teacher={teacher}\n          isEdit={true}\n          setdivision={setdivision}\n          division={division}\n          setgroup={setgroup}\n          group={group}\n          setprefect={setprefect}\n          prefects={prefect}\n          sba={sba}\n          setsba={setsba}\n          sbaStaff={sbaStaff}\n          setsbaStaff={setsbaStaff}\n          setteacher={setteacher}\n        />\n      </div>\n    </>\n  );\n}\n\nexport default EditClass;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}