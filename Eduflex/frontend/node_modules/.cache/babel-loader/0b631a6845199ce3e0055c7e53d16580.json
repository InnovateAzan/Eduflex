{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\AdminComponents\\\\finance\\\\PrepareBill.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport ListTable from \"./billPayment/PaymentTable\";\nimport Search from \"../shared/Search\";\nimport { useSelector } from \"react-redux\";\nimport { selectClasses } from \"../../store/slices/schoolSlice\";\nimport axios from \"../../store/axios\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { errorAlert, currentCurrency } from \"../../utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst tableHeader = [{\n  id: \"date\",\n  name: \"Date\"\n}, {\n  id: \"userID\",\n  name: \"Student ID\"\n}, {\n  id: \"paymentMethod\",\n  name: \"Payment Method\"\n}, {\n  id: \"bank\",\n  name: \"Bank\"\n}, {\n  id: \"chequeNumber\",\n  name: \"Cheque Number\"\n}, {\n  id: \"amount\",\n  name: `Amount (${currentCurrency()})`\n}];\nfunction PrepareBill() {\n  _s();\n  const [data, setdata] = useState([]);\n  const [storeData, setstoreData] = useState([]);\n  const [classID, setclass] = useState(\"\");\n  const [status, setstatus] = useState(\"\");\n  const classes = useSelector(selectClasses);\n  const history = useHistory();\n  useEffect(() => {\n    axios.get(\"/transactions/students/fees\").then(res => {\n      setdata(res.data);\n      setstoreData(res.data);\n    });\n  }, []);\n  const inputFields = [{\n    label: \"Search by Student ID\",\n    type: \"text\",\n    value: classID,\n    name: \"student\",\n    onChange: setclass\n  }, {\n    label: \"Search by Status\",\n    type: \"select\",\n    value: status,\n    onChange: setstatus,\n    options: [{\n      id: \"all\",\n      name: \"All Students\"\n    }, {\n      id: \"day\",\n      name: \"Day Students\"\n    }, {\n      id: \"fresh-day\",\n      name: \"Fresh day Students\"\n    }, {\n      id: \"border\",\n      name: \"Border Students\"\n    }, {\n      id: \"fresh-border\",\n      name: \"Fresh-border Border Students\"\n    }]\n  }];\n  const handleDelete = id => {\n    axios.delete(`/transactions/delete/${id}`).then(res => {\n      if (res.data.error) {\n        errorAlert(res.data.error);\n      }\n      setdata(data.filter(e => e._id !== id));\n    });\n  };\n  const handleSearch = e => {\n    e.preventDefault();\n    let newData = [];\n    if (classID) {\n      newData = storeData.filter(i => {\n        var _i$userID;\n        return i === null || i === void 0 ? void 0 : (_i$userID = i.userID) === null || _i$userID === void 0 ? void 0 : _i$userID.toLowerCase().includes(classID === null || classID === void 0 ? void 0 : classID.toLowerCase());\n      });\n    }\n    if (status) {\n      newData = storeData.filter(i => {\n        var _i$status;\n        return i === null || i === void 0 ? void 0 : (_i$status = i.status) === null || _i$status === void 0 ? void 0 : _i$status.toLowerCase().includes(status === null || status === void 0 ? void 0 : status.toLowerCase());\n      });\n    }\n    setdata(newData);\n  };\n  const handleReset = e => {\n    e.preventDefault();\n    setdata(storeData);\n    setstatus(\"\");\n  };\n  const handleEdit = id => {\n    history.push(`/finance/transactions/receipt/${id}`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"float-right mb-5\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        className: \"btn blue__btn\",\n        to: \"/finance/students/fees\",\n        children: \"Make A Payment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \" mb-5\",\n      children: \"Students Fees Transactions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Search, {\n      title: \"Filter Students\",\n      handleReset: handleReset,\n      handleSearch: handleSearch,\n      inputFields: inputFields\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ListTable, {\n      data: data,\n      handleEdit: handleEdit,\n      handleDelete: handleDelete,\n      tableHeader: tableHeader,\n      isEdit: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n_s(PrepareBill, \"uNGh+Gtfae80KoW2kvp8ofsK8AE=\", false, function () {\n  return [useSelector, useHistory];\n});\n_c = PrepareBill;\nexport default PrepareBill;\nvar _c;\n$RefreshReg$(_c, \"PrepareBill\");","map":{"version":3,"names":["React","useState","useEffect","ListTable","Search","useSelector","selectClasses","axios","Link","useHistory","errorAlert","currentCurrency","jsxDEV","_jsxDEV","tableHeader","id","name","PrepareBill","_s","data","setdata","storeData","setstoreData","classID","setclass","status","setstatus","classes","history","get","then","res","inputFields","label","type","value","onChange","options","handleDelete","delete","error","filter","e","_id","handleSearch","preventDefault","newData","i","_i$userID","userID","toLowerCase","includes","_i$status","handleReset","handleEdit","push","children","className","to","fileName","_jsxFileName","lineNumber","columnNumber","title","isEdit","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/AdminComponents/finance/PrepareBill.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ListTable from \"./billPayment/PaymentTable\";\nimport Search from \"../shared/Search\";\nimport { useSelector } from \"react-redux\";\nimport { selectClasses } from \"../../store/slices/schoolSlice\";\nimport axios from \"../../store/axios\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { errorAlert, currentCurrency } from \"../../utils\";\n\nconst tableHeader = [\n  { id: \"date\", name: \"Date\" },\n  { id: \"userID\", name: \"Student ID\" },\n  { id: \"paymentMethod\", name: \"Payment Method\" },\n  { id: \"bank\", name: \"Bank\" },\n  { id: \"chequeNumber\", name: \"Cheque Number\" },\n  { id: \"amount\", name: `Amount (${currentCurrency()})` },\n];\n\nfunction PrepareBill() {\n  const [data, setdata] = useState([]);\n  const [storeData, setstoreData] = useState([]);\n  const [classID, setclass] = useState(\"\");\n  const [status, setstatus] = useState(\"\");\n  const classes = useSelector(selectClasses);\n  const history = useHistory();\n\n  useEffect(() => {\n    axios.get(\"/transactions/students/fees\").then((res) => {\n      setdata(res.data);\n      setstoreData(res.data);\n    });\n  }, []);\n\n  const inputFields = [\n    {\n      label: \"Search by Student ID\",\n      type: \"text\",\n      value: classID,\n      name: \"student\",\n      onChange: setclass,\n    },\n    {\n      label: \"Search by Status\",\n      type: \"select\",\n      value: status,\n      onChange: setstatus,\n      options: [\n        { id: \"all\", name: \"All Students\" },\n        { id: \"day\", name: \"Day Students\" },\n        { id: \"fresh-day\", name: \"Fresh day Students\" },\n        { id: \"border\", name: \"Border Students\" },\n        { id: \"fresh-border\", name: \"Fresh-border Border Students\" },\n      ],\n    },\n  ];\n\n  const handleDelete = (id) => {\n    axios.delete(`/transactions/delete/${id}`).then((res) => {\n      if (res.data.error) {\n        errorAlert(res.data.error);\n      }\n      setdata(data.filter((e) => e._id !== id));\n    });\n  };\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    let newData = [];\n    if (classID) {\n      newData = storeData.filter((i) =>\n        i?.userID?.toLowerCase().includes(classID?.toLowerCase())\n      );\n    }\n    if (status) {\n      newData = storeData.filter((i) =>\n        i?.status?.toLowerCase().includes(status?.toLowerCase())\n      );\n    }\n    setdata(newData);\n  };\n\n  const handleReset = (e) => {\n    e.preventDefault();\n    setdata(storeData);\n    setstatus(\"\");\n  };\n\n  const handleEdit = (id) => {\n    history.push(`/finance/transactions/receipt/${id}`);\n  };\n\n  return (\n    <div>\n      <div className=\"float-right mb-5\">\n        <Link className=\"btn blue__btn\" to=\"/finance/students/fees\">\n          Make A Payment\n        </Link>\n      </div>\n      <h3 className=\" mb-5\">Students Fees Transactions</h3>\n\n      <Search\n        title=\"Filter Students\"\n        handleReset={handleReset}\n        handleSearch={handleSearch}\n        inputFields={inputFields}\n      />\n      <ListTable\n        data={data}\n        handleEdit={handleEdit}\n        handleDelete={handleDelete}\n        tableHeader={tableHeader}\n        isEdit={true}\n      />\n    </div>\n  );\n}\n\nexport default PrepareBill;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}