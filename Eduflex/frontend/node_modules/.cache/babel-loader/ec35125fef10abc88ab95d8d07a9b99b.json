{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\AdminComponents\\\\academics\\\\calender\\\\Calender.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport CalenderTable from \"../../shared/ListTable\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"../../../store/axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { errorAlert } from \"../../../utils\";\nimport { selectUser } from \"../../../store/slices/userSlice\";\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst tableHeadings = [{\n  id: \"resource\",\n  name: \"Type\"\n}, {\n  id: \"title\",\n  name: \"Event\"\n}, {\n  id: \"day\",\n  name: \"Date\"\n}, {\n  id: \"start\",\n  name: \"Starts\"\n}, {\n  id: \"end\",\n  name: \"Ends\"\n}];\nfunction Calender() {\n  _s();\n  const [events, setevents] = useState([]);\n  const history = useHistory();\n  const [storeData, setstoreData] = useState([]);\n  const user = useSelector(selectUser);\n  const [query, setquery] = useState(\"\");\n  useEffect(() => {\n    axios.get(\"/calendar\").then(res => {\n      let eventsData = res.data.map(e => {\n        var _e$start, _e$end;\n        return {\n          ...e,\n          start: e !== null && e !== void 0 && e.allDay ? \"All day\" : e === null || e === void 0 ? void 0 : (_e$start = e.start) === null || _e$start === void 0 ? void 0 : _e$start.replace(/^[^:]*([0-2]\\d:[0-5]\\d).*$/, \"$1\"),\n          end: e !== null && e !== void 0 && e.allDay ? \"-\" : e === null || e === void 0 ? void 0 : (_e$end = e.end) === null || _e$end === void 0 ? void 0 : _e$end.replace(/^[^:]*([0-2]\\d:[0-5]\\d).*$/, \"$1\")\n        };\n      });\n      setevents(eventsData);\n      setstoreData(eventsData);\n    });\n  }, []);\n  const handleDelete = id => {\n    axios.delete(`/calendar/delete/${id}`).then(res => {\n      if (res.data.error) {\n        errorAlert(res.data.error);\n        return 0;\n      }\n      setevents(events.filter(event => event._id !== id));\n    });\n  };\n  const handleEdit = id => {\n    history.push(`/academics/calender/edit/${id}`);\n  };\n  const handleSearch = e => {\n    e.preventDefault();\n    if (query) {\n      let newEvents = storeData.filter(i => i.title.toLowerCase().includes(query.toLowerCase()));\n      setevents(newEvents);\n    } else {\n      setevents(storeData);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row mb-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSearch,\n          className: \"d-flex align-items-stretch\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: query,\n            onChange: e => setquery(e.target.value),\n            type: \"text\",\n            className: \"form-control\",\n            placeholder: \"Search by name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn blue__btn\",\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col\",\n        children: [(user === null || user === void 0 ? void 0 : user.role) === \"admin\" && /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/academics/calender/add\",\n          className: \"btn btn__lg blue__btn\",\n          children: \"Add New Event\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/academics/calender/view\",\n          className: \"btn btn__lg blue__btn ml-2\",\n          children: \"View Calendar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CalenderTable, {\n      data: events,\n      handleDelete: handleDelete,\n      handleEdit: handleEdit,\n      noActions: (user === null || user === void 0 ? void 0 : user.role) !== \"admin\" ? true : false,\n      tableHeader: tableHeadings\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(Calender, \"k9FXTWuPM5uWFMHtgDW47+6dph0=\", false, function () {\n  return [useHistory, useSelector];\n});\n_c = Calender;\nexport default Calender;\nvar _c;\n$RefreshReg$(_c, \"Calender\");","map":{"version":3,"names":["React","useState","useEffect","CalenderTable","Link","axios","useHistory","errorAlert","selectUser","useSelector","jsxDEV","_jsxDEV","tableHeadings","id","name","Calender","_s","events","setevents","history","storeData","setstoreData","user","query","setquery","get","then","res","eventsData","data","map","e","_e$start","_e$end","start","allDay","replace","end","handleDelete","delete","error","filter","event","_id","handleEdit","push","handleSearch","preventDefault","newEvents","i","title","toLowerCase","includes","children","className","onSubmit","value","onChange","target","type","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","role","to","noActions","tableHeader","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/AdminComponents/academics/calender/Calender.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport CalenderTable from \"../../shared/ListTable\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"../../../store/axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { errorAlert } from \"../../../utils\";\nimport { selectUser } from \"../../../store/slices/userSlice\";\nimport { useSelector } from \"react-redux\";\n\nconst tableHeadings = [\n  { id: \"resource\", name: \"Type\" },\n  { id: \"title\", name: \"Event\" },\n  { id: \"day\", name: \"Date\" },\n  { id: \"start\", name: \"Starts\" },\n  { id: \"end\", name: \"Ends\" },\n];\n\nfunction Calender() {\n  const [events, setevents] = useState([]);\n  const history = useHistory();\n  const [storeData, setstoreData] = useState([]);\n  const user = useSelector(selectUser);\n  const [query, setquery] = useState(\"\");\n\n  useEffect(() => {\n    axios.get(\"/calendar\").then((res) => {\n      let eventsData = res.data.map((e) => {\n        return {\n          ...e,\n          start: e?.allDay\n            ? \"All day\"\n            : e?.start?.replace(/^[^:]*([0-2]\\d:[0-5]\\d).*$/, \"$1\"),\n          end: e?.allDay\n            ? \"-\"\n            : e?.end?.replace(/^[^:]*([0-2]\\d:[0-5]\\d).*$/, \"$1\"),\n        };\n      });\n      setevents(eventsData);\n      setstoreData(eventsData);\n    });\n  }, []);\n\n  const handleDelete = (id) => {\n    axios.delete(`/calendar/delete/${id}`).then((res) => {\n      if (res.data.error) {\n        errorAlert(res.data.error);\n        return 0;\n      }\n      setevents(events.filter((event) => event._id !== id));\n    });\n  };\n  const handleEdit = (id) => {\n    history.push(`/academics/calender/edit/${id}`);\n  };\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    if (query) {\n      let newEvents = storeData.filter((i) =>\n        i.title.toLowerCase().includes(query.toLowerCase())\n      );\n      setevents(newEvents);\n    } else {\n      setevents(storeData);\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"row mb-5\">\n        <div className=\"col\">\n          <form onSubmit={handleSearch} className=\"d-flex align-items-stretch\">\n            <input\n              value={query}\n              onChange={(e) => setquery(e.target.value)}\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"Search by name\"\n            />\n            <button className=\"btn blue__btn\">Search</button>\n          </form>\n        </div>\n        <div className=\"col\">\n          {user?.role === \"admin\" && (\n            <Link\n              to=\"/academics/calender/add\"\n              className=\"btn btn__lg blue__btn\"\n            >\n              Add New Event\n            </Link>\n          )}\n          <Link\n            to=\"/academics/calender/view\"\n            className=\"btn btn__lg blue__btn ml-2\"\n          >\n            View Calendar\n          </Link>\n        </div>\n      </div>\n      <CalenderTable\n        data={events}\n        handleDelete={handleDelete}\n        handleEdit={handleEdit}\n        noActions={user?.role !== \"admin\" ? true : false}\n        tableHeader={tableHeadings}\n      />\n    </div>\n  );\n}\n\nexport default Calender;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}