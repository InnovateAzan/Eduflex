{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdul Rehman\\\\Desktop\\\\Project\\\\First_And_Second_Module_v1.0\\\\frontend\\\\src\\\\AdminComponents\\\\canteen\\\\AddCanteenPayment.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport AddForm from \"./CanteenForm\";\nimport Nav from \"./CanteenNav\";\nimport Payments from \"./MemberPayments\";\nimport axios from \"../../store/axios\";\nimport { errorAlert, successAlert } from \"../../utils\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AddCanteenPayment() {\n  _s();\n  const [studentID, setstudentID] = useState(\"\");\n  const [members, setmembers] = useState([]);\n  const [member, setmember] = useState({});\n  const [amount, setamount] = useState(\"\");\n  const [loading, setloading] = useState(false);\n  const [planPrice, setplanPrice] = useState(\"\");\n  const [planName, setplanName] = useState(\"\");\n  const [paymentPlan, setpaymentPlan] = useState([]);\n  useEffect(() => {\n    axios.get(\"/canteen\").then(res => {\n      setmembers(res.data);\n    });\n  }, []);\n  useEffect(() => {\n    axios.get(\"/paymentplan\").then(res => {\n      var _res$data;\n      ///console.log(res.data);\n      setpaymentPlan((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.plans);\n    });\n  }, []);\n  const handleSelectuser = id => {\n    let selectedmember = members.find(e => e.memberID === id);\n    setmember(selectedmember);\n    let price = paymentPlan.find(e => e.plan === (selectedmember === null || selectedmember === void 0 ? void 0 : selectedmember.paymentMethod));\n    setplanPrice(price === null || price === void 0 ? void 0 : price.price);\n    setplanName(price === null || price === void 0 ? void 0 : price.name);\n    setstudentID(id);\n  };\n  const handleAdd = () => {\n    setloading(true);\n    axios.put(`/canteen/payment/${studentID}`, {\n      amount,\n      covers: amount / planPrice\n    }).then(res => {\n      setloading(false);\n      if (res.data.error) {\n        errorAlert(res.data.error);\n      }\n      successAlert(\"Payment succefully recorded\");\n      setamount(\"\");\n      setmember(res.data.doc);\n    }).catch(err => {\n      errorAlert(\"Payment Failed\");\n      console.log(err);\n      setloading(false);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Add Canteen Payment \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-5 row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-6  content__container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \" Select Canteen Member\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            onChange: e => handleSelectuser(e.target.value),\n            className: \"form-select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              defaultValue: true,\n              hidden: true,\n              children: \"Choose...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this), (members === null || members === void 0 ? void 0 : members.length) > 0 ? members === null || members === void 0 ? void 0 : members.map(e => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: e.memberID,\n              children: [e.name, \" \", e.memberID]\n            }, e.memberID, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 19\n            }, this)) : /*#__PURE__*/_jsxDEV(\"option\", {\n              disabled: true,\n              children: \"No members yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AddForm, {\n          studentID: studentID,\n          setstudentID: handleSelectuser,\n          handleAdd: handleAdd,\n          loading: loading,\n          planPrice: planPrice,\n          amount: amount,\n          setamount: setamount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-6\",\n        children: planPrice && /*#__PURE__*/_jsxDEV(Payments, {\n          planName: planName,\n          member: member\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(AddCanteenPayment, \"ZFG6erc6y+6q/xIT1i6WhV8Axbo=\");\n_c = AddCanteenPayment;\nexport default AddCanteenPayment;\nvar _c;\n$RefreshReg$(_c, \"AddCanteenPayment\");","map":{"version":3,"names":["React","useState","useEffect","AddForm","Nav","Payments","axios","errorAlert","successAlert","jsxDEV","_jsxDEV","Fragment","_Fragment","AddCanteenPayment","_s","studentID","setstudentID","members","setmembers","member","setmember","amount","setamount","loading","setloading","planPrice","setplanPrice","planName","setplanName","paymentPlan","setpaymentPlan","get","then","res","data","_res$data","plans","handleSelectuser","id","selectedmember","find","e","memberID","price","plan","paymentMethod","name","handleAdd","put","covers","error","doc","catch","err","console","log","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onChange","target","value","defaultValue","hidden","length","map","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Abdul Rehman/Desktop/Project/First_And_Second_Module_v1.0/frontend/src/AdminComponents/canteen/AddCanteenPayment.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport AddForm from \"./CanteenForm\";\nimport Nav from \"./CanteenNav\";\nimport Payments from \"./MemberPayments\";\nimport axios from \"../../store/axios\";\nimport { errorAlert, successAlert } from \"../../utils\";\n\nfunction AddCanteenPayment() {\n  const [studentID, setstudentID] = useState(\"\");\n  const [members, setmembers] = useState([]);\n  const [member, setmember] = useState({});\n  const [amount, setamount] = useState(\"\");\n  const [loading, setloading] = useState(false);\n  const [planPrice, setplanPrice] = useState(\"\");\n  const [planName, setplanName] = useState(\"\");\n  const [paymentPlan, setpaymentPlan] = useState([]);\n\n  useEffect(() => {\n    axios.get(\"/canteen\").then((res) => {\n      setmembers(res.data);\n    });\n  }, []);\n\n  useEffect(() => {\n    axios.get(\"/paymentplan\").then((res) => {\n      ///console.log(res.data);\n      setpaymentPlan(res.data?.plans);\n    });\n  }, []);\n\n  const handleSelectuser = (id) => {\n    let selectedmember = members.find((e) => e.memberID === id);\n    setmember(selectedmember);\n    let price = paymentPlan.find(\n      (e) => e.plan === selectedmember?.paymentMethod\n    );\n    setplanPrice(price?.price);\n    setplanName(price?.name);\n    setstudentID(id);\n  };\n\n  const handleAdd = () => {\n    setloading(true);\n    axios\n      .put(`/canteen/payment/${studentID}`, {\n        amount,\n        covers: amount / planPrice,\n      })\n      .then((res) => {\n        setloading(false);\n        if (res.data.error) {\n          errorAlert(res.data.error);\n        }\n        successAlert(\"Payment succefully recorded\");\n        setamount(\"\");\n        setmember(res.data.doc);\n      })\n      .catch((err) => {\n        errorAlert(\"Payment Failed\");\n        console.log(err);\n        setloading(false);\n      });\n  };\n\n  return (\n    <>\n      <Nav />\n      <h3>Add Canteen Payment </h3>\n      <div className=\"mb-5 row\">\n        <div className=\"col-sm-6  content__container\">\n          <div className=\"mb-5\">\n            <label className=\"form-label\"> Select Canteen Member</label>\n            <select\n              onChange={(e) => handleSelectuser(e.target.value)}\n              className=\"form-select\"\n            >\n              <option defaultValue hidden>\n                Choose...\n              </option>\n              {members?.length > 0 ? (\n                members?.map((e) => (\n                  <option key={e.memberID} value={e.memberID}>\n                    {e.name} {e.memberID}\n                  </option>\n                ))\n              ) : (\n                <option disabled>No members yet</option>\n              )}\n            </select>\n          </div>\n          <AddForm\n            studentID={studentID}\n            setstudentID={handleSelectuser}\n            handleAdd={handleAdd}\n            loading={loading}\n            planPrice={planPrice}\n            amount={amount}\n            setamount={setamount}\n          />\n        </div>\n        <div className=\"col-sm-6\">\n          {planPrice && <Payments planName={planName} member={member} />}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default AddCanteenPayment;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}